[{"id":"a113cbb3.d689a8","type":"tab","label":"WiFiProbes","disabled":false,"info":""},{"id":"71540dd6.896e84","type":"subflow","name":"Room","info":"Fan Number\nFan On/Off\nFan Speed\nSecurity Breach\nAlarm On/Off\nMessage","category":"","in":[{"x":40,"y":220,"wires":[{"id":"a2511e8e.9692e"}]}],"out":[{"x":680,"y":340,"wires":[{"id":"391992ad.72e41e","port":0}]}],"env":[]},{"id":"c9be21a0.8dbe1","type":"subflow","name":"Home","info":"Livingroom\nKitchen\nBedroom1\nBedroom2\nBedroom3\nOffice\nLaudry\nBoilerroom\nBathroom1\nBathroom2\nBathroom3\nOutside","category":"","in":[],"out":[{"x":520,"y":100,"wires":[{"id":"64a8c3d1.08db6c","port":0},{"id":"7c334419.18b91c","port":0}]},{"x":520,"y":160,"wires":[{"id":"64a8c3d1.08db6c","port":1},{"id":"7c334419.18b91c","port":1}]},{"x":520,"y":220,"wires":[{"id":"64a8c3d1.08db6c","port":2},{"id":"7c334419.18b91c","port":2}]},{"x":520,"y":280,"wires":[{"id":"64a8c3d1.08db6c","port":3},{"id":"7c334419.18b91c","port":3}]},{"x":600,"y":100,"wires":[{"id":"64a8c3d1.08db6c","port":4},{"id":"7c334419.18b91c","port":4}]},{"x":600,"y":160,"wires":[{"id":"64a8c3d1.08db6c","port":5},{"id":"7c334419.18b91c","port":5}]},{"x":600,"y":220,"wires":[{"id":"64a8c3d1.08db6c","port":6},{"id":"7c334419.18b91c","port":6}]},{"x":600,"y":280,"wires":[{"id":"64a8c3d1.08db6c","port":7},{"id":"7c334419.18b91c","port":7}]},{"x":680,"y":100,"wires":[{"id":"64a8c3d1.08db6c","port":8},{"id":"7c334419.18b91c","port":8}]},{"x":680,"y":160,"wires":[{"id":"64a8c3d1.08db6c","port":9},{"id":"7c334419.18b91c","port":9}]},{"x":680,"y":220,"wires":[{"id":"64a8c3d1.08db6c","port":10},{"id":"7c334419.18b91c","port":10}]},{"x":680,"y":280,"wires":[{"id":"64a8c3d1.08db6c","port":11},{"id":"7c334419.18b91c","port":11}]}]},{"id":"421d37aa.8349b8","type":"subflow","name":"setGroup","info":"","category":"myUI","in":[{"x":40,"y":80,"wires":[{"id":"8e9e0ad6.899c58"}]}],"out":[{"x":360,"y":120,"wires":[{"id":"8e9e0ad6.899c58","port":1}]}],"env":[{"name":"host","type":"str","value":"","ui":{"icon":"font-awesome/fa-object-group","label":{"en-US":"Host"},"type":"input","opts":{"types":["str","env"]}}},{"name":"property","type":"str","value":"","ui":{"icon":"font-awesome/fa-crosshairs","label":{"en-US":"Property"},"type":"input","opts":{"types":["str","env"]}}}],"color":"#3caa8e","inputLabels":["uiDropdon"],"outputLabels":["update"],"icon":"node-red-dashboard/ui_dropdown.png","status":{"x":360,"y":40,"wires":[{"id":"8e9e0ad6.899c58","port":0}]}},{"id":"9a4448e5.72d408","type":"subflow","name":"deleteGroup","info":"","category":"myUI","in":[{"x":40,"y":80,"wires":[{"id":"641df330.150d0c"}]}],"out":[{"x":340,"y":120,"wires":[{"id":"641df330.150d0c","port":1}]}],"env":[{"name":"cancel","type":"str","value":"cancel"}],"color":"#a1decf","icon":"font-awesome/fa-minus-square","status":{"x":340,"y":40,"wires":[{"id":"641df330.150d0c","port":0}]}},{"id":"ec80cdc.ae06c3","type":"subflow","name":"saveData","info":"# Save Data to global store\n\n## parameters\n\nparamter | Description\n- | -\nhost | path to object hosting the list entry\nparameter | name of the parameter containing the list","category":"myUI","in":[{"x":60,"y":80,"wires":[{"id":"7d3f15b2.08c11c"}]}],"out":[{"x":340,"y":120,"wires":[{"id":"7d3f15b2.08c11c","port":1}]}],"env":[{"name":"host","type":"str","value":"","ui":{"icon":"font-awesome/fa-object-group","label":{"en-US":"Host"},"type":"input","opts":{"types":["str","env"]}}},{"name":"property","type":"str","value":"","ui":{"icon":"font-awesome/fa-crosshairs","label":{"en-US":"Property"},"type":"input","opts":{"types":["str","env"]}}}],"color":"#3caa8e","inputLabels":["uiElement(s)"],"outputLabels":["update"],"icon":"font-awesome/fa-database","status":{"x":340,"y":40,"wires":[{"id":"7d3f15b2.08c11c","port":0}]}},{"id":"b8810dd9.449fa","type":"subflow","name":"addItemToList","info":"","category":"myUI","in":[{"x":60,"y":80,"wires":[{"id":"66862cd8.ec6f64"}]}],"out":[{"x":340,"y":120,"wires":[{"id":"66862cd8.ec6f64","port":1}]}],"env":[{"name":"defaults","type":"json","value":"","ui":{"icon":"font-awesome/fa-database","type":"input","opts":{"types":["json"]},"label":{}}}],"color":"#3caa8e","inputLabels":["add Button"],"outputLabels":["update Link"],"icon":"font-awesome/fa-plus-square","status":{"x":340,"y":40,"wires":[{"id":"66862cd8.ec6f64","port":0}]}},{"id":"27071f3f.31b85","type":"subflow","name":"InitializeUi","info":"Initialize the UI Elemnets and fill the drop down list","category":"myUI","in":[{"x":60,"y":80,"wires":[{"id":"dc890485.dcd878"}]}],"out":[{"x":320,"y":120,"wires":[{"id":"dc890485.dcd878","port":1}]}],"env":[{"name":"globalContext","type":"str","value":"mySettings"},{"name":"baseObject","type":"str","value":"heating.periods"},{"name":"uiElement","type":"str","value":"uiDropdown"},{"name":"filterProperty","type":"str","value":"","ui":{"icon":"font-awesome/fa-filter","label":{"en-US":"Filter"},"type":"input","opts":{"types":["str","num","bool","json","bin","env"]}}},{"name":"filterValue","type":"str","value":"","ui":{"icon":"font-awesome/fa-crosshairs","label":{"en-US":"Value"},"type":"input","opts":{"types":["str","num","bool","json","bin","env"]}}}],"color":"#3caa8e","icon":"node-red/arrow-in.png","status":{"x":320,"y":40,"wires":[{"id":"dc890485.dcd878","port":0}]}},{"id":"89e3929.169637","type":"subflow","name":"updateUi","info":"","category":"myUI","in":[{"x":54,"y":85,"wires":[{"id":"3d80c44a.06dbec"}]}],"out":[{"x":326,"y":85,"wires":[{"id":"3d80c44a.06dbec","port":1}]},{"x":326,"y":136,"wires":[{"id":"3d80c44a.06dbec","port":2}]}],"env":[{"name":"uiControl","type":"json","value":"{\"type\":{\"switch\":{\"defaultSwitch\":{\"enable\":true},\"defaultDimmer\":{\"enable\":false},\"defaultColor\":{\"enable\":false}},\"dimmer\":{\"defaultSwitch\":{\"enable\":true},\"defaultDimmer\":{\"enable\":true},\"defaultColor\":{\"enable\":false}},\"rgb\":{\"defaultSwitch\":{\"enable\":true},\"defaultDimmer\":{\"enable\":true},\"defaultColor\":{\"enable\":true}},\"rgbw\":{\"defaultSwitch\":{\"enable\":true},\"defaultDimmer\":{\"enable\":true},\"defaultColor\":{\"enable\":true}},\"rgb-w\":{\"defaultSwitch\":{\"enable\":true},\"defaultDimmer\":{\"enable\":true},\"defaultColor\":{\"enable\":true}}}}","ui":{"icon":"font-awesome/fa-check-square-o","type":"input","opts":{"types":["json"]},"label":{}}}],"color":"#a1decf","inputLabels":["updateLink"],"outputLabels":["updateGroup","updateElements"],"status":{"x":326,"y":34,"wires":[{"id":"3d80c44a.06dbec","port":0}]}},{"id":"19ef275d.90c419","type":"subflow","name":"fillDropdown","info":"","category":"myUI","in":[{"x":40,"y":80,"wires":[{"id":"d89ad102.36fa7"}]}],"out":[{"x":340,"y":120,"wires":[{"id":"d89ad102.36fa7","port":1}]}],"env":[{"name":"customTopic","type":"str","value":"","ui":{"icon":"font-awesome/fa-tasks","label":{"en-US":"Topic"},"type":"input","opts":{"types":["str","env"]}}},{"name":"filterProperty","type":"str","value":"","ui":{"icon":"font-awesome/fa-filter","label":{"en-US":"Filter"},"type":"input","opts":{"types":["str","env"]}}},{"name":"filterValue","type":"str","value":"","ui":{"icon":"font-awesome/fa-crosshairs","label":{"en-US":"Value"},"type":"input","opts":{"types":["str","num","bool","json","bin","env"]}}}],"color":"#a1decf","inputLabels":["update"],"outputLabels":["dropdownUi"],"status":{"x":343,"y":51,"wires":[{"id":"d89ad102.36fa7","port":0}]}},{"id":"5c26875c.b71ff8","type":"subflow","name":"buildChart","info":"","category":"myHeating","in":[{"x":54,"y":85,"wires":[{"id":"a48cfce4.487e6"}]}],"out":[{"x":343,"y":119,"wires":[{"id":"a48cfce4.487e6","port":1}]}],"env":[],"color":"#a1decf","inputLabels":["select"],"outputLabels":["chart"],"icon":"font-awesome/fa-area-chart","status":{"x":343,"y":51,"wires":[{"id":"a48cfce4.487e6","port":0}]}},{"id":"efe64c51.3652e","type":"subflow","name":"buildSchedule","info":"","category":"myHeating","in":[{"x":122,"y":119,"wires":[{"id":"5c99b054.5823"}]}],"out":[{"x":394,"y":170,"wires":[{"id":"5c99b054.5823","port":1}]}],"env":[],"color":"#a1decf","inputLabels":["select"],"outputLabels":["schedule"],"icon":"font-awesome/fa-calendar-o","status":{"x":394,"y":68,"wires":[{"id":"5c99b054.5823","port":0}]}},{"id":"8fea6c82.8c5f2","type":"subflow","name":"tableCallback","info":"","category":"myUI","in":[{"x":34,"y":85,"wires":[{"id":"feb4a638.b57db8"}]}],"out":[{"x":343,"y":119,"wires":[{"id":"feb4a638.b57db8","port":1}]}],"env":[{"name":"globalContext","type":"str","value":"mySettings"},{"name":"dataContext","type":"str","value":""}],"color":"#3caa8e","icon":"font-awesome/fa-database","status":{"x":343,"y":51,"wires":[{"id":"feb4a638.b57db8","port":0}]}},{"id":"c46d3622.6147d8","type":"subflow","name":"setValue","info":"","category":"myHome","in":[{"x":71,"y":85,"wires":[{"id":"bc5b194d.a19ee8"}]}],"out":[{"x":411,"y":119,"wires":[{"id":"bc5b194d.a19ee8","port":1}]}],"env":[{"name":"globalContext","type":"str","value":"mySettings","ui":{"icon":"font-awesome/fa-globe","type":"input","opts":{"types":["str","env"]},"label":{}}},{"name":"dataContext","type":"str","value":"heating.devices","ui":{"icon":"font-awesome/fa-database","type":"input","opts":{"types":["str","env"]},"label":{}}},{"name":"datapointName","type":"str","value":"SET_TEMPERATURE","ui":{"icon":"font-awesome/fa-arrows-v","type":"input","opts":{"types":["str"]},"label":{}}},{"name":"groupContext","type":"str","value":"heating.rooms","ui":{"icon":"font-awesome/fa-group","type":"input","opts":{"types":["str","env"]},"label":{}}},{"name":"sourceKey","type":"str","value":"name","ui":{"icon":"font-awesome/fa-arrow-circle-right","type":"input","opts":{"types":["str","env"]},"label":{}}},{"name":"targetKey","type":"str","value":"room","ui":{"icon":"font-awesome/fa-arrow-circle-left","type":"input","opts":{"types":["str","env"]},"label":{}}}],"color":"#3caa8e","icon":"font-awesome/fa-lightbulb-o","status":{"x":411,"y":51,"wires":[{"id":"bc5b194d.a19ee8","port":0}]}},{"id":"adc11aae.b3d5b8","type":"subflow","name":"preUI","info":"","category":"myHeating","in":[{"x":51,"y":85,"wires":[{"id":"e52d8e95.66917"}]}],"out":[{"x":343,"y":119,"wires":[{"id":"e52d8e95.66917","port":1}]}],"env":[{"name":"datapoint","type":"str","value":"BOOST_STATE"}],"color":"#a1decf","icon":"node-red/timer.svg","status":{"x":343,"y":34,"wires":[{"id":"e52d8e95.66917","port":0}]}},{"id":"f26e05b.4babbf8","type":"subflow","name":"filter Room","info":"","category":"myHome","in":[{"x":71,"y":85,"wires":[{"id":"f9bc6dd2.da22a"}]}],"out":[{"x":360,"y":119,"wires":[{"id":"f9bc6dd2.da22a","port":1}]}],"env":[{"name":"room","type":"str","value":"Arbeitszimmer","ui":{"icon":"font-awesome/fa-bed","type":"input","opts":{"types":["str","env"]},"label":{}}}],"color":"#3caa8e","status":{"x":360,"y":51,"wires":[{"id":"f9bc6dd2.da22a","port":0}]}},{"id":"8b95e4a9.1e0f18","type":"subflow","name":"groupSend","info":"","category":"myLights","in":[{"x":68,"y":85,"wires":[{"id":"eadd64de.393498"}]}],"out":[{"x":343,"y":119,"wires":[{"id":"eadd64de.393498","port":1}]}],"env":[{"name":"devices","type":"str","value":"light.devices","ui":{"icon":"font-awesome/fa-lightbulb-o","label":{"en-US":"Devices"},"type":"input","opts":{"types":["str","env"]}}},{"name":"groupTopic","type":"str","value":"groups","ui":{"icon":"font-awesome/fa-tasks","label":{"en-US":"Group"},"type":"input","opts":{"types":["str","env"]}}},{"name":"groupMembers","type":"str","value":"groupMembers","ui":{"icon":"font-awesome/fa-crosshairs","label":{"en-US":"Group Property"},"type":"input","opts":{"types":["str","env"]}}},{"name":"sceneTopic","type":"str","value":"scenes","ui":{"icon":"font-awesome/fa-tasks","label":{},"type":"input","opts":{"types":["str","num","bool","json","bin","env"]}}},{"name":"sceneMembers","type":"str","value":"sceneMembers","ui":{"icon":"font-awesome/fa-crosshairs","label":{"en-US":"Scene"},"type":"input","opts":{"types":["str","env"]}}}],"color":"#3caa8e","icon":"font-awesome/fa-object-group","status":{"x":343,"y":51,"wires":[{"id":"eadd64de.393498","port":0}]}},{"id":"e9e5bb1.fdbb548","type":"subflow","name":"saveChecklist","info":"# save data from ui-list node\n\n## decription\n\n - processes data from a ui-list note. \n - creates new objects in list on demand\n - delets unchecked objects\n - triggers uiUpdate\n\n## imput\n`msg.payload.uuid` | to identify changed item\n`msg.payload.isChecked` | create new objects if _true_\n | delete object if _false_\n\n## output\n#1 | standard message\n#2 | trigger to updateUI node","category":"myHome","in":[{"x":51,"y":85,"wires":[{"id":"ae6dbb77.7f31d8"}]}],"out":[{"x":394,"y":85,"wires":[{"id":"ae6dbb77.7f31d8","port":1}]},{"x":394,"y":136,"wires":[{"id":"ae6dbb77.7f31d8","port":2}]}],"env":[{"name":"defaults","type":"json","value":"","ui":{"icon":"font-awesome/fa-sliders","label":{"en-US":"Defaults"},"type":"input","opts":{"types":["json"]}}}],"color":"#3caa8e","inputLabels":["ui-List"],"outputLabels":["","update UI"],"status":{"x":394,"y":34,"wires":[{"id":"ae6dbb77.7f31d8","port":0}]}},{"id":"2b7f3aff.416326","type":"subflow","name":"HomeIOT","info":"","category":"","in":[],"out":[],"env":[],"color":"#DDAA99"},{"id":"4c5c349b.4eb26c","type":"ui_group","z":"","name":"Livingroom","tab":"24b5aecd.2f2d32","disp":true,"width":"6","collapse":true},{"id":"24b5aecd.2f2d32","type":"ui_tab","z":"","name":"Home","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"1245c071.4e1e","type":"mqtt-broker","z":"","name":"uMQTT","broker":"192.168.0.3","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"1950d605.eba90a","type":"mqtt-broker","z":"","name":"Localhost","broker":"Localhost","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"295c2c31.882894","type":"mqtt-broker","z":"","name":"uMQTT","broker":"192.168.0.3","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"39664163.1a5f4e","type":"mqtt-broker","z":"","name":"","broker":"localhost","port":"1883","clientid":"nodered","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"/Service/nodered/status","birthQos":"0","birthPayload":"started","closeTopic":"","closePayload":"","willTopic":"/Service/nodered/status","willQos":"0","willPayload":"crashed"},{"id":"a2511e8e.9692e","type":"switch","z":"71540dd6.896e84","name":"Room","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"uptime","vt":"str"},{"t":"cont","v":"rssi","vt":"str"},{"t":"cont","v":"ram","vt":"str"},{"t":"cont","v":"load","vt":"str"},{"t":"cont","v":"temprature","vt":"str"},{"t":"cont","v":"humidity","vt":"str"},{"t":"cont","v":"pressure","vt":"str"},{"t":"cont","v":"lux","vt":"str"},{"t":"cont","v":"breach","vt":"str"},{"t":"cont","v":"oled","vt":"str"},{"t":"cont","v":"pin","vt":"str"},{"t":"cont","v":"dimvalue","vt":"str"}],"checkall":"true","repair":false,"outputs":12,"x":150,"y":220,"wires":[[],[],[],[],[],[],[],[],[],[],[],[]]},{"id":"391992ad.72e41e","type":"join","z":"71540dd6.896e84","name":"Announce","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"5","count":"1","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":540,"y":340,"wires":[[]]},{"id":"e0b9d2b.78ada3","type":"mqtt out","z":"71540dd6.896e84","name":"","topic":"","qos":"","retain":"","broker":"","x":696,"y":233,"wires":[]},{"id":"49d586fe.455058","type":"batch","z":"71540dd6.896e84","name":"2 Together","mode":"count","count":"2","overlap":0,"interval":10,"allowEmptySequence":false,"topics":[],"x":540,"y":300,"wires":[["e0b9d2b.78ada3"]]},{"id":"58a74c3f.9a40d4","type":"ping","z":"71540dd6.896e84","name":"Ken","host":"10.1.10.27","timer":"20","x":50,"y":340,"wires":[["10fe1604.08aaba"]]},{"id":"10fe1604.08aaba","type":"switch","z":"71540dd6.896e84","name":"","property":"payload","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":170,"y":340,"wires":[["98a1d972.d32e38"]]},{"id":"b27b99f4.935428","type":"rbe","z":"71540dd6.896e84","name":"Block ","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":670,"y":440,"wires":[["391992ad.72e41e"]]},{"id":"93efb863.40de38","type":"change","z":"71540dd6.896e84","name":"Alarm Status","rules":[{"t":"change","p":"payload","pt":"msg","from":"On","fromt":"str","to":"Alarm is set to On","tot":"str"},{"t":"change","p":"payload","pt":"msg","from":"Off","fromt":"str","to":"Alarm is set to Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":440,"wires":[["b27b99f4.935428"]]},{"id":"98a1d972.d32e38","type":"change","z":"71540dd6.896e84","name":"Alarm On","rules":[{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"On","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":140,"y":440,"wires":[[]]},{"id":"98ee7527.a734e8","type":"debug","z":"71540dd6.896e84","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":350,"y":540,"wires":[]},{"id":"3eee4e7e.04d602","type":"function","z":"71540dd6.896e84","name":"Sensors","func":"var m1 = {payload : msg.payload.System.Build,topic:\"build\"};\nvar m2 = {payload:msg.payload.System.Plugins,topic:\"plugins\"};\nvar m3 = {payload:msg.payload.System[\"Local time\"],topic:\"time\"};\nvar m4 = {payload:msg.payload.System.Unit,topic:\"unit\"};\nvar m5 = {payload:msg.payload.System.Name,topic:\"name\"};\nvar m6 = {payload:msg.payload.System.Uptime,topic:\"uptime\"};\nvar m7 = {payload:msg.payload.System.Load,topic:\"load\"};\nvar m8 = {payload:msg.payload.System[\"Free RAM\"],topic:\"ram\"};\nvar m9 = {payload:msg.payload.WiFi.IP,topic:\"ip\"};\nvar m10 = {payload:msg.payload.WiFi[\"MAC address\"],topic:\"mac\"};\nvar m11 = {payload:msg.payload.WiFi.SSID,topic:\"ssid\"};\nvar m12 = {payload:msg.payload.WiFi.RSSI,topic:\"rssi\"};\nreturn [m1,m2,m3,m4,m5,m6,m7,m8,m9,m10,m11,m12];","outputs":12,"noerr":0,"x":140,"y":560,"wires":[["98ee7527.a734e8"],[],[],[],[],[],[],[],[],[],[],[]]},{"id":"1529c767.3e3499","type":"ui_ui_control","z":"71540dd6.896e84","name":"","x":500,"y":40,"wires":[[]]},{"id":"1cd7166f.043e0a","type":"inject","z":"71540dd6.896e84","name":"","topic":"","payload":"Home","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":290,"y":40,"wires":[["1529c767.3e3499"]]},{"id":"4291ee97.9be4d","type":"saveflow","z":"71540dd6.896e84","name":"Save Flow","path":"/home/pi/rpieasy/flows/","enabled":false,"exporttype":"addflow","x":290,"y":80,"wires":[[]]},{"id":"ce0fa920.c4ee28","type":"inject","z":"71540dd6.896e84","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":80,"wires":[["4291ee97.9be4d"]]},{"id":"64a8c3d1.08db6c","type":"switch","z":"c9be21a0.8dbe1","name":"Home","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Livingroom","vt":"str"},{"t":"cont","v":"Kitchen","vt":"str"},{"t":"cont","v":"Bedroom1","vt":"str"},{"t":"cont","v":"Bedroom2","vt":"str"},{"t":"cont","v":"Bedroom3","vt":"str"},{"t":"cont","v":"Office","vt":"str"},{"t":"cont","v":"Laundry","vt":"str"},{"t":"cont","v":"Boilerroom","vt":"str"},{"t":"cont","v":"Bathroom1","vt":"str"},{"t":"cont","v":"Bathroom2","vt":"str"},{"t":"cont","v":"Bathroom3","vt":"str"},{"t":"cont","v":"Outside","vt":"str"},{"t":"cont","v":"false","vt":"str"}],"checkall":"true","repair":false,"outputs":13,"x":330,"y":100,"wires":[[],[],[],[],[],[],[],[],[],[],[],[],[]]},{"id":"7b5635a4.66bdfc","type":"mqtt in","z":"c9be21a0.8dbe1","name":"","topic":"Livingroom/#","qos":"2","datatype":"auto","broker":"1245c071.4e1e","x":110,"y":100,"wires":[["64a8c3d1.08db6c"]]},{"id":"c98c53ad.1bc82","type":"inject","z":"c9be21a0.8dbe1","name":"","topic":"Home","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":140,"wires":[["3ce3811d.36990e"]]},{"id":"3ce3811d.36990e","type":"http request","z":"c9be21a0.8dbe1","name":"","method":"GET","ret":"obj","paytoqs":false,"url":"http://10.1.10.49/json","tls":"","proxy":"","authType":"","x":90,"y":180,"wires":[["9db705a5.7313d8"]]},{"id":"d6a9ce47.b622c","type":"mqtt out","z":"c9be21a0.8dbe1","name":"","topic":"","qos":"","retain":"true","broker":"1245c071.4e1e","x":90,"y":260,"wires":[]},{"id":"43750953.3af128","type":"mqtt in","z":"c9be21a0.8dbe1","name":"","topic":"stupid/#","qos":"2","datatype":"auto","broker":"1245c071.4e1e","x":70,"y":300,"wires":[["7c334419.18b91c"]]},{"id":"330c034e.6e113c","type":"json","z":"c9be21a0.8dbe1","name":"","property":"payload","action":"","pretty":false,"x":90,"y":340,"wires":[["7c334419.18b91c"]]},{"id":"7c334419.18b91c","type":"switch","z":"c9be21a0.8dbe1","name":"Devices","property":"payload.System.Name","propertyType":"msg","rules":[{"t":"cont","v":"Livingroom","vt":"str"},{"t":"cont","v":"Kitchen","vt":"str"},{"t":"cont","v":"Bedroom1","vt":"str"},{"t":"cont","v":"Bedroom2","vt":"str"},{"t":"cont","v":"Bedroom3","vt":"str"},{"t":"cont","v":"Office","vt":"str"},{"t":"cont","v":"Laundry","vt":"str"},{"t":"cont","v":"Boilerroom","vt":"str"},{"t":"cont","v":"Bathroom1","vt":"str"},{"t":"cont","v":"Bathroom2","vt":"str"},{"t":"cont","v":"Bathroom3","vt":"str"},{"t":"cont","v":"Outside","vt":"str"},{"t":"cont","v":"false","vt":"str"}],"checkall":"true","repair":false,"outputs":13,"x":340,"y":320,"wires":[[],[],[],[],[],[],[],[],[],[],[],[],[]]},{"id":"9db705a5.7313d8","type":"change","z":"c9be21a0.8dbe1","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"stupid","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":90,"y":220,"wires":[["d6a9ce47.b622c"]]},{"id":"aa40d497.df8ab8","type":"arp","z":"c9be21a0.8dbe1","name":"Bhavin","macs":"60:E3:AC:B4:90:93","x":70,"y":660,"wires":[["834d96e2.e7fbc8"]]},{"id":"2d016836.c04438","type":"arp","z":"c9be21a0.8dbe1","name":"Wife","macs":"","x":70,"y":580,"wires":[["b4a02c63.6d38b"]]},{"id":"37245761.942c78","type":"arp","z":"c9be21a0.8dbe1","name":"Henna","macs":"","x":70,"y":620,"wires":[["46d8671b.9749f8"]]},{"id":"585ea085.9ec6f","type":"arp","z":"c9be21a0.8dbe1","name":"Husband","macs":"D0:FC:CC:24:C0:8A","x":80,"y":540,"wires":[["7f173fbb.5dcee"]]},{"id":"fa27bd2a.c0d3","type":"inject","z":"c9be21a0.8dbe1","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":80,"y":480,"wires":[["2d016836.c04438","585ea085.9ec6f","37245761.942c78","aa40d497.df8ab8"]]},{"id":"7f173fbb.5dcee","type":"switch","z":"c9be21a0.8dbe1","name":"Husband","property":"payload","propertyType":"msg","rules":[{"t":"empty"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":220,"y":520,"wires":[["b6d1d0e6.d1b61"],["67f7868.bfc9878"]]},{"id":"b4a02c63.6d38b","type":"switch","z":"c9be21a0.8dbe1","name":"wife","property":"payload","propertyType":"msg","rules":[{"t":"empty"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":210,"y":600,"wires":[["a2148d6c.7bcff"],["accf8839.cfd078"]]},{"id":"46d8671b.9749f8","type":"switch","z":"c9be21a0.8dbe1","name":"Henna","property":"payload","propertyType":"msg","rules":[{"t":"empty"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":210,"y":700,"wires":[["dd6a55a7.854508"],["3adb7697.c24c5a"]]},{"id":"834d96e2.e7fbc8","type":"switch","z":"c9be21a0.8dbe1","name":"Bhavin","property":"payload","propertyType":"msg","rules":[{"t":"empty"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":210,"y":780,"wires":[["21c7c38d.cb5f0c"],["a968e765.3f5708"]]},{"id":"b6d1d0e6.d1b61","type":"function","z":"c9be21a0.8dbe1","name":"Away","func":"msg.payload = \"away\";\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":500,"wires":[["12650d46.859613"]]},{"id":"67f7868.bfc9878","type":"function","z":"c9be21a0.8dbe1","name":"Home","func":"msg.payload = \"home\";\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":540,"wires":[["12650d46.859613"]]},{"id":"12650d46.859613","type":"function","z":"c9be21a0.8dbe1","name":"Husband","func":"msg.payload = flow.get('husband');\nmsg.topic = \"husband\";\nreturn msg;","outputs":1,"noerr":0,"x":520,"y":520,"wires":[["816c0fc7.ba635"]]},{"id":"a2148d6c.7bcff","type":"function","z":"c9be21a0.8dbe1","name":"Away","func":"msg.payload = \"away\";\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":580,"wires":[["23cf0faa.2188"]]},{"id":"accf8839.cfd078","type":"function","z":"c9be21a0.8dbe1","name":"Home","func":"msg.payload = \"home\";\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":620,"wires":[["23cf0faa.2188"]]},{"id":"dd6a55a7.854508","type":"function","z":"c9be21a0.8dbe1","name":"Away","func":"msg.payload = \"away\";\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":680,"wires":[["413ed6b0.5c2218"]]},{"id":"3adb7697.c24c5a","type":"function","z":"c9be21a0.8dbe1","name":"Home","func":"msg.payload = \"home\";\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":720,"wires":[["413ed6b0.5c2218"]]},{"id":"21c7c38d.cb5f0c","type":"function","z":"c9be21a0.8dbe1","name":"Away","func":"msg.payload = \"away\";\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":760,"wires":[["b6530929.e5bef8"]]},{"id":"a968e765.3f5708","type":"function","z":"c9be21a0.8dbe1","name":"Home","func":"msg.payload = \"home\";\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":800,"wires":[["b6530929.e5bef8"]]},{"id":"4037d591.f1322c","type":"rbe","z":"c9be21a0.8dbe1","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":790,"y":520,"wires":[["a5928499.f5f318"]]},{"id":"a5928499.f5f318","type":"function","z":"c9be21a0.8dbe1","name":"","func":"//Itï¿½s time to compose the data, create a Join notification for Android devices and display the information about the household members on a dashboard.\n\nvar x = global.get('JOIN_husband1');\n\n\nmsg.person = \"husband\";\n\n\nvar d = new Date();\nvar h = d.getHours(); \nvar m = d.getMinutes();\n\nif(m < 10){\n    var z = m.toString();\n    var m = \"0\" + z;\n} \nif(h < 10){\n    var z = h.toString();\n    var h = \"0\" + z;\n}\n\n\nvar time = h + \":\" + m;\n\nif(msg.payload === \"home\"){\n    msg.push = {\n        \"deviceIds\": x,\n        \"title\":\"Home Update\",\n        \"text\":\"husband just got home\",\n        \"icon\":\"https://www.rawshorts.com/freeicons/wp-content/uploads/2017/01/green_repicthousebase_1484336387-1.png\",\n    };\n    msg.status = \"husband arrived home at\";\n    msg.payload = time;\n    msg.color = \"green\";\n    flow.set('husband', 1);\n    msg.index = 1;\n}\nelse{\n    msg.push = {\n        \"deviceIds\": x,\n        \"title\":\"Home Update\",\n        \"text\":\"husband is no longer at home\",\n        \"icon\":\"https://www.rawshorts.com/freeicons/wp-content/uploads/2017/01/red_repicthousebase_1484336386-1.png\",\n    }; \n    msg.status = \"husband left home at\";\n    msg.payload = time;\n    msg.color = \"red\";\n    flow.set('husband', 0);\n    msg.index = 0;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":870,"y":560,"wires":[["a2293f50.56dd5"]]},{"id":"d5fcb860.dd3a68","type":"inject","z":"c9be21a0.8dbe1","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":900,"wires":[["4173f462.fa6d3c","823e75e8.0b4698","a0a364a9.9fb698","763d466f.bc5958"]]},{"id":"4173f462.fa6d3c","type":"function","z":"c9be21a0.8dbe1","name":"Husband","func":"msg.payload = flow.get('husband');\nmsg.topic = \"husband\";\nreturn msg;","outputs":1,"noerr":0,"x":340,"y":840,"wires":[["7c5c9e5.22b176"]]},{"id":"7c5c9e5.22b176","type":"ui_chart","z":"c9be21a0.8dbe1","name":"","group":"","order":13,"width":0,"height":0,"label":"Presence","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"4","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":560,"y":900,"wires":[[]]},{"id":"763d466f.bc5958","type":"function","z":"c9be21a0.8dbe1","name":"Bhavin","func":"msg.payload = flow.get('bhavin');\nmsg.topic = \"bhavin\";\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":960,"wires":[["7c5c9e5.22b176"]]},{"id":"823e75e8.0b4698","type":"function","z":"c9be21a0.8dbe1","name":"Wife","func":"msg.payload = flow.get('wife');\nmsg.topic = \"wife\";\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":880,"wires":[["7c5c9e5.22b176"]]},{"id":"a0a364a9.9fb698","type":"function","z":"c9be21a0.8dbe1","name":"Henna","func":"msg.payload = flow.get('child1');\nmsg.topic = \"henna\";\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":920,"wires":[["7c5c9e5.22b176"]]},{"id":"b6530929.e5bef8","type":"function","z":"c9be21a0.8dbe1","name":"Bhavin","func":"msg.payload = flow.get('bhavin');\nmsg.topic = \"bhavin\";\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":780,"wires":[["8eee6934.dfc418"]]},{"id":"413ed6b0.5c2218","type":"function","z":"c9be21a0.8dbe1","name":"Henna","func":"msg.payload = flow.get('henna');\nmsg.topic = \"henna\";\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":700,"wires":[["3caa1b3c.d5ea24"]]},{"id":"23cf0faa.2188","type":"function","z":"c9be21a0.8dbe1","name":"Wife","func":"msg.payload = flow.get('wife');\nmsg.topic = \"wife\";\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":600,"wires":[["2873212c.42634e"]]},{"id":"816c0fc7.ba635","type":"function","z":"c9be21a0.8dbe1","name":"Husband","func":"x =  context.get('count');\ny =  context.get('message');\n//set defaults & return payload\nif (x === null || x === undefined && y === null || y === undefined){\n    x = 1;\n    context.set('count' , x);\n    context.set('message', msg.payload);\n    return msg;\n}\n//count only if payloads are the same or reset\nif (x < 3){\n    var current = msg.payload;\n    var last    = context.get('message');\n    if(current === last){  \n        x++;\n        context.set('count' , x);\n        \n    }\n    else{\n    x = 1;\n    context.set('message', msg.payload);\n    }\n}\n//return and reset\nif (x == 3){\n    var current = msg.payload;\n    var last    = context.get('message');\n    if(current === last){\n        x = 1;\n        context.set('count' , x);\n        return msg;\n    }\n}\n","outputs":1,"noerr":0,"x":660,"y":520,"wires":[["4037d591.f1322c"]]},{"id":"3caa1b3c.d5ea24","type":"function","z":"c9be21a0.8dbe1","name":"Henna","func":"\nx =  context.get('count');\ny =  context.get('message');\n//set defaults & return payload\nif (x === null || x === undefined && y === null || y === undefined){\n    x = 1;\n    context.set('count' , x);\n    context.set('message', msg.payload);\n    return msg;\n}\n//count only if payloads are the same or reset\nif (x < 3){\n    var current = msg.payload;\n    var last    = context.get('message');\n    if(current === last){  \n        x++;\n        context.set('count' , x);\n        \n    }\n    else{\n    x = 1;\n    context.set('message', msg.payload);\n    }\n}\n//return and reset\nif (x == 3){\n    var current = msg.payload;\n    var last    = context.get('message');\n    if(current === last){\n        x = 1;\n        context.set('count' , x);\n        return msg;\n    }\n}\n","outputs":1,"noerr":0,"x":590,"y":700,"wires":[["f94d4b03.930088"]]},{"id":"2873212c.42634e","type":"function","z":"c9be21a0.8dbe1","name":"Wife","func":"\nx =  context.get('count');\ny =  context.get('message');\n//set defaults & return payload\nif (x === null || x === undefined && y === null || y === undefined){\n    x = 1;\n    context.set('count' , x);\n    context.set('message', msg.payload);\n    return msg;\n}\n//count only if payloads are the same or reset\nif (x < 3){\n    var current = msg.payload;\n    var last    = context.get('message');\n    if(current === last){  \n        x++;\n        context.set('count' , x);\n        \n    }\n    else{\n    x = 1;\n    context.set('message', msg.payload);\n    }\n}\n//return and reset\nif (x == 3){\n    var current = msg.payload;\n    var last    = context.get('message');\n    if(current === last){\n        x = 1;\n        context.set('count' , x);\n        return msg;\n    }\n}\n","outputs":1,"noerr":0,"x":590,"y":600,"wires":[["274e1a51.a58e96"]]},{"id":"8eee6934.dfc418","type":"function","z":"c9be21a0.8dbe1","name":"Bhavin","func":"\nx =  context.get('count');\ny =  context.get('message');\n//set defaults & return payload\nif (x === null || x === undefined && y === null || y === undefined){\n    x = 1;\n    context.set('count' , x);\n    context.set('message', msg.payload);\n    return msg;\n}\n//count only if payloads are the same or reset\nif (x < 3){\n    var current = msg.payload;\n    var last    = context.get('message');\n    if(current === last){  \n        x++;\n        context.set('count' , x);\n        \n    }\n    else{\n    x = 1;\n    context.set('message', msg.payload);\n    }\n}\n//return and reset\nif (x == 3){\n    var current = msg.payload;\n    var last    = context.get('message');\n    if(current === last){\n        x = 1;\n        context.set('count' , x);\n        return msg;\n    }\n}\n","outputs":1,"noerr":0,"x":590,"y":780,"wires":[["f66538a1.f9e268"]]},{"id":"f66538a1.f9e268","type":"rbe","z":"c9be21a0.8dbe1","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":730,"y":780,"wires":[["585c20d3.fa2ec"]]},{"id":"f94d4b03.930088","type":"rbe","z":"c9be21a0.8dbe1","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":730,"y":700,"wires":[["5d899e2e.18fb9"]]},{"id":"274e1a51.a58e96","type":"rbe","z":"c9be21a0.8dbe1","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":710,"y":600,"wires":[["6c7ce365.933d8c"]]},{"id":"6c7ce365.933d8c","type":"function","z":"c9be21a0.8dbe1","name":"","func":"var x = global.get('JOIN_wife2');\n\n\nmsg.person = \"wife\";\n\n\nvar d = new Date();\nvar h = d.getHours(); \nvar m = d.getMinutes();\n\nif(m < 10){\n    var z = m.toString();\n    var m = \"0\" + z;\n} \nif(h < 10){\n    var z = h.toString();\n    var h = \"0\" + z;\n}\n\n\nvar time = h + \":\" + m;\n\nif(msg.payload === \"home\"){\n    msg.push = {\n        \"deviceIds\": x,\n        \"title\":\"Home Update\",\n        \"text\":\"wife just got home\",\n        \"icon\":\"https://www.rawshorts.com/freeicons/wp-content/uploads/2017/01/green_repicthousebase_1484336387-1.png\",\n    };\n    msg.status = \"wife arrived home at\";\n    msg.payload = time;\n    msg.color = \"green\";\n    flow.set('wife', 2);\n    msg.index = 2;\n}\nelse{\n    msg.push = {\n        \"deviceIds\": x,\n        \"title\":\"Home Update\",\n        \"text\":\"wife is no longer at home\",\n        \"icon\":\"https://www.rawshorts.com/freeicons/wp-content/uploads/2017/01/red_repicthousebase_1484336386-1.png\",\n    }; \n    msg.status = \"wife left home at\";\n    msg.payload = time;\n    msg.color = \"red\";\n    flow.set('wife', 0);\n    msg.index = 0;\n}\n\nreturn msg;\n","outputs":1,"noerr":0,"x":870,"y":600,"wires":[["86dda0f9.caa74"]]},{"id":"5d899e2e.18fb9","type":"function","z":"c9be21a0.8dbe1","name":"","func":"var x = global.get('JOIN_henna3');\n\n\nmsg.person = \"henna\";\n\n\nvar d = new Date();\nvar h = d.getHours(); \nvar m = d.getMinutes();\n\nif(m < 10){\n    var z = m.toString();\n    var m = \"0\" + z;\n} \nif(h < 10){\n    var z = h.toString();\n    var h = \"0\" + z;\n}\n\n\nvar time = h + \":\" + m;\n\nif(msg.payload === \"home\"){\n    msg.push = {\n        \"deviceIds\": x,\n        \"title\":\"Home Update\",\n        \"text\":\"Henna just got home\",\n        \"icon\":\"https://www.rawshorts.com/freeicons/wp-content/uploads/2017/01/green_repicthousebase_1484336387-1.png\",\n    };\n    msg.status = \"Henna arrived home at\";\n    msg.payload = time;\n    msg.color = \"green\";\n    flow.set('henna3', 3);\n    msg.index = 3;\n}\nelse{\n    msg.push = {\n        \"deviceIds\": x,\n        \"title\":\"Home Update\",\n        \"text\":\"Henna is no longer at home\",\n        \"icon\":\"https://www.rawshorts.com/freeicons/wp-content/uploads/2017/01/red_repicthousebase_1484336386-1.png\",\n    }; \n    msg.status = \"Henna left home at\";\n    msg.payload = time;\n    msg.color = \"red\";\n    flow.set('henna', 0);\n    msg.index = 0;\n}\n\nreturn msg;\n","outputs":1,"noerr":0,"x":870,"y":700,"wires":[["eb84039e.f598e"]]},{"id":"585c20d3.fa2ec","type":"function","z":"c9be21a0.8dbe1","name":"","func":"var x = global.get('JOIN_bhavin4');\n\n\nmsg.person = \"Bhavin\";\n\n\nvar d = new Date();\nvar h = d.getHours(); \nvar m = d.getMinutes();\n\nif(m < 10){\n    var z = m.toString();\n    var m = \"0\" + z;\n} \nif(h < 10){\n    var z = h.toString();\n    var h = \"0\" + z;\n}\n\n\nvar time = h + \":\" + m;\n\nif(msg.payload === \"home\"){\n    msg.push = {\n        \"deviceIds\": x,\n        \"title\":\"Home Update\",\n        \"text\":\"Bhavin just got home\",\n        \"icon\":\"https://www.rawshorts.com/freeicons/wp-content/uploads/2017/01/green_repicthousebase_1484336387-1.png\",\n    };\n    msg.status = \"Bhavin arrived home at\";\n    msg.payload = time;\n    msg.color = \"green\";\n    flow.set('bhavin', 4);\n    msg.index = 4;\n}\nelse{\n    msg.push = {\n        \"deviceIds\": x,\n        \"title\":\"Home Update\",\n        \"text\":\"Bhavin is no longer at home\",\n        \"icon\":\"https://www.rawshorts.com/freeicons/wp-content/uploads/2017/01/red_repicthousebase_1484336386-1.png\",\n    }; \n    msg.status = \"Bhavin left home at\";\n    msg.payload = time;\n    msg.color = \"red\";\n    flow.set('Bhavin', 0);\n    msg.index = 0;\n}\n\nreturn msg;\n","outputs":1,"noerr":0,"x":870,"y":780,"wires":[["9d2aa5e1.493578"]]},{"id":"a2293f50.56dd5","type":"ui_text","z":"c9be21a0.8dbe1","group":"","order":1,"width":0,"height":0,"name":"","label":"Husband","format":"<font color={{msg.color}}>{{msg.payload}}</font>","layout":"row-spread","x":1020,"y":560,"wires":[]},{"id":"86dda0f9.caa74","type":"ui_text","z":"c9be21a0.8dbe1","group":"","order":1,"width":0,"height":0,"name":"","label":"Wife","format":"<font color={{msg.color}}>{{msg.payload}}</font>","layout":"row-spread","x":1010,"y":600,"wires":[]},{"id":"eb84039e.f598e","type":"ui_text","z":"c9be21a0.8dbe1","group":"","order":1,"width":0,"height":0,"name":"","label":"Child1","format":"<font color={{msg.color}}>{{msg.payload}}</font>","layout":"row-spread","x":1010,"y":700,"wires":[]},{"id":"9d2aa5e1.493578","type":"ui_text","z":"c9be21a0.8dbe1","group":"","order":1,"width":0,"height":0,"name":"","label":"Child2","format":"<font color={{msg.color}}>{{msg.payload}}</font>","layout":"row-spread","x":1010,"y":780,"wires":[]},{"id":"5ea9b450.afa8fc","type":"debug","z":"c9be21a0.8dbe1","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":550,"y":840,"wires":[]},{"id":"cd0b061d.43e1e8","type":"ping","z":"c9be21a0.8dbe1","name":"Ken","host":"10.1.10.27","timer":"20","x":50,"y":380,"wires":[["5325ef81.bb026"]]},{"id":"5325ef81.bb026","type":"switch","z":"c9be21a0.8dbe1","name":"","property":"payload","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":50,"y":420,"wires":[["f3809edb.68efe"]]},{"id":"f3809edb.68efe","type":"change","z":"c9be21a0.8dbe1","name":"Alarm On","rules":[{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"On","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":180,"y":420,"wires":[[]]},{"id":"6626938d.a13edc","type":"rbe","z":"c9be21a0.8dbe1","name":"Block ","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":690,"y":460,"wires":[[]]},{"id":"83dff82d.6f9f68","type":"change","z":"c9be21a0.8dbe1","name":"Alarm Status","rules":[{"t":"change","p":"payload","pt":"msg","from":"On","fromt":"str","to":"Alarm is set to On","tot":"str"},{"t":"change","p":"payload","pt":"msg","from":"Off","fromt":"str","to":"Alarm is set to Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":530,"y":460,"wires":[["6626938d.a13edc"]]},{"id":"ec893412.f3d198","type":"saveflow","z":"c9be21a0.8dbe1","name":"Save Flow","path":"/home/pi/rpieasy/flows/","enabled":false,"exporttype":"addflow","x":270,"y":20,"wires":[[]]},{"id":"5f7fe460.f2bfac","type":"inject","z":"c9be21a0.8dbe1","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":20,"wires":[["ec893412.f3d198"]]},{"id":"69ae6e00.0df364","type":"switch","z":0,"name":"Livingroom","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"uptime","vt":"str"},{"t":"cont","v":"rssi","vt":"str"},{"t":"cont","v":"ram","vt":"str"},{"t":"cont","v":"load","vt":"str"},{"t":"cont","v":"temprature","vt":"str"},{"t":"cont","v":"humidity","vt":"str"},{"t":"cont","v":"pressure","vt":"str"},{"t":"cont","v":"lux","vt":"str"},{"t":"cont","v":"breach","vt":"str"},{"t":"cont","v":"oled","vt":"str"},{"t":"cont","v":"pin","vt":"str"},{"t":"cont","v":"dimvalue","vt":"str"}],"checkall":"true","repair":false,"outputs":12,"x":190,"y":200,"wires":[["57734dee.125bd4"],["ee780125.e26dd"],["bede7658.07b758"],["c24e3bf9.63bae8"],["8b3bbd53.b6e0b"],["99354d85.bc584"],["d75d3990.bb6c18"],["3366ba43.9d20a6"],["ffa46929.6c6848"],["115e56ef.1bca09"],["bbafef80.f046"],["9bca6197.3cb2b","e030492b.23f678"]]},{"id":"57734dee.125bd4","type":"ui_text","z":0,"group":"4c5c349b.4eb26c","order":5,"width":"1","height":"1","name":"","label":"Uptime","format":"","layout":"col-center","x":360,"y":80,"wires":[]},{"id":"c24e3bf9.63bae8","type":"ui_text","z":0,"group":"4c5c349b.4eb26c","order":7,"width":"1","height":"1","name":"","label":"Load","format":"","layout":"col-center","x":376,"y":217,"wires":[]},{"id":"bede7658.07b758","type":"ui_text","z":0,"group":"4c5c349b.4eb26c","order":6,"width":"1","height":"1","name":"","label":"RAM","format":"","layout":"col-center","x":375,"y":177,"wires":[]},{"id":"ee780125.e26dd","type":"ui_text","z":0,"group":"4c5c349b.4eb26c","order":8,"width":"1","height":"1","name":"","label":"RSSI","format":"","layout":"col-center","x":371,"y":137,"wires":[]},{"id":"9bca6197.3cb2b","type":"ui_switch","z":0,"name":"","label":"On/Off","tooltip":"Turn Fan On/Off","group":"4c5c349b.4eb26c","order":3,"width":"2","height":"1","passthru":false,"decouple":"false","topic":"Livingroom/dimmer/dimvalue/set","style":"","onvalue":"128","onvalueType":"num","onicon":"","oncolor":"","offvalue":"0","offvalueType":"num","officon":"","offcolor":"","x":370,"y":300,"wires":[["d4709b2f.62f078","3b5599ac.aa2e56"]]},{"id":"e030492b.23f678","type":"ui_slider","z":0,"name":"","label":"Fan Speed","tooltip":"Adjust Fan Speed","group":"4c5c349b.4eb26c","order":4,"width":"4","height":"1","passthru":false,"outs":"end","topic":"Livingroom/dimmer/dimvalue/set","min":0,"max":"128","step":1,"x":350,"y":340,"wires":[["d4709b2f.62f078","3b5599ac.aa2e56"]]},{"id":"bbafef80.f046","type":"ui_numeric","z":0,"name":"","label":"Fan","tooltip":"Select Fan","group":"4c5c349b.4eb26c","order":2,"width":"2","height":"1","wrap":false,"passthru":false,"topic":"Livingroom/dimmer/pin/set","format":"","min":"6","max":"9","step":1,"x":370,"y":260,"wires":[["d4709b2f.62f078","3b5599ac.aa2e56"]]},{"id":"99354d85.bc584","type":"ui_gauge","z":0,"name":"Humidity","group":"4c5c349b.4eb26c","order":10,"width":"1","height":"1","gtype":"gage","title":"Humidity","label":"","format":" %","min":"40","max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":540,"y":140,"wires":[]},{"id":"8b3bbd53.b6e0b","type":"ui_gauge","z":0,"name":"Temperature","group":"4c5c349b.4eb26c","order":9,"width":"1","height":"1","gtype":"gage","title":"Temperature","label":"","format":" F","min":"45","max":"90","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":550,"y":100,"wires":[]},{"id":"3366ba43.9d20a6","type":"ui_gauge","z":0,"name":"Luminocity","group":"4c5c349b.4eb26c","order":12,"width":"1","height":"1","gtype":"gage","title":"Luminocity","label":"","format":" Lux","min":0,"max":10,"colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":550,"y":220,"wires":[]},{"id":"d75d3990.bb6c18","type":"ui_gauge","z":0,"name":"Pressure","group":"4c5c349b.4eb26c","order":11,"width":"1","height":"1","gtype":"gage","title":"Pressure","label":"","format":" Kpa","min":0,"max":10,"colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":540,"y":180,"wires":[]},{"id":"bc4f6342.dbd7c","type":"ui_switch","z":0,"name":"Alarm","label":"On/Off","tooltip":"Turn Alarm On/Off","group":"4c5c349b.4eb26c","order":14,"width":"2","height":"1","passthru":true,"decouple":"false","topic":"Livingroom/alarm/set","style":"","onvalue":"On","onvalueType":"str","onicon":"","oncolor":"","offvalue":"Off","offvalueType":"str","officon":"","offcolor":"","x":350,"y":420,"wires":[["3ad7b422.cbd03c","6a83babc.a92204"]]},{"id":"ffa46929.6c6848","type":"ui_text_input","z":0,"name":"Security","label":"Security","tooltip":"Watch for Security breach","group":"4c5c349b.4eb26c","order":13,"width":"2","height":"1","passthru":true,"mode":"text","delay":300,"topic":"Livingroom/breach/set","x":340,"y":380,"wires":[["d4709b2f.62f078"]]},{"id":"d4709b2f.62f078","type":"join","z":0,"name":"Announce","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"5","count":"1","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":560,"y":320,"wires":[[]]},{"id":"3ad7b422.cbd03c","type":"mqtt out","z":0,"name":"","topic":"","qos":"","retain":"","broker":"1950d605.eba90a","x":570,"y":360,"wires":[]},{"id":"3b5599ac.aa2e56","type":"batch","z":0,"name":"2 Together","mode":"count","count":"2","overlap":0,"interval":10,"allowEmptySequence":false,"topics":[],"x":560,"y":280,"wires":[["3ad7b422.cbd03c"]]},{"id":"fc4fddfb.9f919","type":"ping","z":0,"name":"Ken","host":"10.1.10.27","timer":"20","x":70,"y":320,"wires":[["56b5585.dd796a8"]]},{"id":"56b5585.dd796a8","type":"switch","z":0,"name":"","property":"payload","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":190,"y":320,"wires":[["b17467d4.7c3a38"]]},{"id":"31e12792.59c5c8","type":"rbe","z":0,"name":"Block ","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":690,"y":420,"wires":[["d4709b2f.62f078"]]},{"id":"6a83babc.a92204","type":"change","z":0,"name":"Alarm Status","rules":[{"t":"change","p":"payload","pt":"msg","from":"On","fromt":"str","to":"Alarm is set to On","tot":"str"},{"t":"change","p":"payload","pt":"msg","from":"Off","fromt":"str","to":"Alarm is set to Off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":530,"y":420,"wires":[["31e12792.59c5c8"]]},{"id":"b17467d4.7c3a38","type":"change","z":0,"name":"Alarm On","rules":[{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"On","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":160,"y":420,"wires":[["bc4f6342.dbd7c"]]},{"id":"d73c9619.bf10a8","type":"debug","z":0,"name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":370,"y":520,"wires":[]},{"id":"115e56ef.1bca09","type":"ui_text_input","z":0,"name":"Oled","label":"Messages","tooltip":"","group":"4c5c349b.4eb26c","order":15,"width":0,"height":0,"passthru":true,"mode":"text","delay":300,"topic":"","x":350,"y":460,"wires":[[]]},{"id":"54762b24.d49b94","type":"saveflow","z":0,"name":"","path":"/home/pi/rpieasy/flows/","enabled":true,"exporttype":"addflow","x":272,"y":34,"wires":[[]]},{"id":"b9a1324.39cd2d","type":"inject","z":0,"name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":87.5,"y":35,"wires":[["54762b24.d49b94"]]},{"id":"8e9e0ad6.899c58","type":"function","z":"421d37aa.8349b8","name":"set editPeriod","func":"var topicParts=msg.topic.split('.');\nvar currentObject= global.get(topicParts[0],\"file\");\nif (!currentObject) return;\n\nvar currentProperty=currentObject.getObject(msg.topic);\nif (!currentProperty) {\n    return [{payload:{fill:\"red\",shape:\"dot\",text:\"msg.topic='object.property' expected\"}},null];\n}\n\n    if (currentObject.isUuid(msg.payload)) {\n        var currentEntry=currentObject.getEntry(currentProperty,msg.payload);\n        if (currentEntry && currentEntry.hasOwnProperty(\"name\")) {\n            currentProperty.uiPointer=currentObject.getIndexOfEntry(currentProperty,msg.payload);\n            currentProperty.uiPointerUuid=msg.payload;\n            msg.index=currentProperty.uiPointer;\n            return [{payload:{fill:\"green\",shape:\"dot\",text:currentEntry.name+\" (\"+currentProperty.uiPointer+\" by uuid)\"}},msg];\n        } else {\n            return [{payload:{fill:\"red\",shape:\"dot\",text:\"uuid not found\"}},currentEntry];\n        }\n    } else {\n        currentProperty.uiPointer=Number(msg.payload);\n        currentProperty.uiPointerUuid=currentObject.getUuidByName(currentProperty,msg.payload);\n        msg.index=Number(msg.payload);\n        return [{payload:{fill:\"green\",shape:\"dot\",text:currentProperty.list[currentProperty.uiPointer].name+\" (\"+msg.payload+\")\"}},msg];\n    }\ntry {\n} catch (err) {\n    return [{payload:{fill:\"red\",shape:\"dot\",text:\"ups, somthing gone wrong.\"}},null];\n} ","outputs":2,"noerr":0,"x":200,"y":80,"wires":[[],[]],"outputLabels":["status","standard"]},{"id":"7d3f15b2.08c11c","type":"function","z":"ec80cdc.ae06c3","name":"save Data","func":"var currentObject= global.get(msg.topic.slice(0,msg.topic.indexOf('.')),\"file\");\nif (!currentObject) return;\nvar currentProperty=currentObject.getCurrentEntry(msg.topic);\nif (!currentProperty) {\n    return [{payload:{fill:\"red\",shape:\"dot\",text: msg.topic+\" not found\"}},null];\n}\nvar propertyName=msg.topic.slice(msg.topic.lastIndexOf('.')+1);\n\ntry {\n    // make shure your topic is set correctly in your ui nodes(s): objectName.propertyName\n    msg.property=currentProperty;\n    if (!currentProperty.hasOwnProperty(propertyName) || currentProperty[propertyName]!=msg.payload) {\n        currentProperty[propertyName]=msg.payload;\n        msg.action=\"updateUI\";\n        return [{payload:{fill:\"green\",shape:\"dot\",text:propertyName+\"=\"+msg.payload+\"!\"}},msg];\n    } else {\n        return [{payload:{fill:\"yellow\",shape:\"dot\",text:propertyName+\" unchanged (\"+msg.payload+\")\"}},null];\n    }\n} catch (err) {\n    return [{payload:{fill:\"red\",shape:\"dot\",text:\"ups, somthing gone wrong.\"}},null];\n} ","outputs":2,"noerr":0,"x":200,"y":80,"wires":[[],[]],"outputLabels":["status","update"],"icon":"font-awesome/fa-database"},{"id":"641df330.150d0c","type":"function","z":"9a4448e5.72d408","name":"delete period","func":"if (msg.payload==env.get(\"cancel\")) return;\nnode.status({});\nvar currentObject= global.get(msg.topic.slice(0,msg.topic.indexOf('.')),\"file\");\nif (!currentObject) return;\nvar currentProperty=currentObject.getCurrentEntry(msg.topic);\nif (!currentProperty) {\n    return[{payload:{fill:\"red\",shape:\"dot\",text: msg.topic+\" not found\"}},null];\n}\nvar name=currentProperty.name;\n\ntry {\n    if (currentObject.deleteEntry(msg.topic)) {\n        return [{payload:{fill:\"green\",shape:\"dot\",text:name+\" deleted\"}},msg];\n    } else {\n        return [{payload:{fill:\"green\",shape:\"dot\",text:name+\" NOT deleted\"}},null];\n    }\n    return msg;\n} catch (err) {\n    return [{payload:{fill:\"red\",shape:\"dot\",text:\"ups, something gone wrong.\"}},null];\n} ","outputs":2,"noerr":0,"x":190,"y":80,"wires":[[],[]],"outputLabels":["status","standard"]},{"id":"3d80c44a.06dbec","type":"function","z":"89e3929.169637","name":"updateUi","func":"var msgDropdown={};\nvar msgName={};\nvar msgList={};\nvar msgParameter=[];\n\nvar topicParts=msg.topic.split('.');\n\nvar currentObject= global.get(topicParts[0],\"file\");\nif (!currentObject) return [{payload:{fill:\"red\",shape:\"dot\",text:topicParts[0]+\" not found\"}},null,null];\nvar keyword = topicParts.pop();\nmsg.item=keyword;\nvar propertyTopic = msg.topic.slice(0,msg.topic.lastIndexOf('.'));\nvar currentProperty=currentObject.getObject(msg.topic);\nif (!currentProperty) {\n    return [{payload:{fill:\"red\",shape:\"dot\",text:\"msg.topic='object.property' expected\"}},null,null];\n}\n\nmsgDropdown.topic=msg.topic;\n\n//try {\n    \n    // get uiControl config\n    var uiControlJson= env.get(\"uiControl\");\n    var uiControl={};\n    if (uiControlJson) {\n//        node.warn(\"step 1\");\n//        node.warn(uiControl);\n        for (var criteria in uiControlJson) { \n//            node.warn(currentProperty.list[currentProperty.uiPointer]);\n//            node.warn(currentProperty.list[currentProperty.uiPointer].hasOwnProperty(criteria));\n            if (currentProperty.list[currentProperty.uiPointer].hasOwnProperty(criteria)) {\n                currentObject.merge(uiControl,uiControlJson[criteria][currentProperty.list[currentProperty.uiPointer][criteria]])\n            }\n        }\n//        node.warn(uiControl)\n    }\n\n    // fill an array for all parameters in list if existing\n    if (currentProperty.list) {\n//        node.warn(\"step 2\");\n//        node.warn(uiControl);\n        for (var item in currentProperty.list[currentProperty.uiPointer]) {\n            if (!item.startsWith('ui'))\n                if (uiControl.hasOwnProperty(item)) { // add uiControl if matches criteria\n                    currentObject.merge(uiControl[item],{\"payload\":currentProperty.list[currentProperty.uiPointer][item], \"topic\": propertyTopic+'.'+item, \"item\": item});\n                    msgParameter.push(uiControl[item]);\n                } else {\n                    msgParameter.push({\"payload\":currentProperty.list[currentProperty.uiPointer][item], \"topic\": propertyTopic+'.'+item, \"item\": item});\n                }\n        }\n//        node.warn(uiControl)\n//        node.warn(msgParameter)\n    }\n \n    switch (keyword) {\n        case \"uiDropdown\":\n            // update all parameters\n            return [{payload:{fill:\"green\",shape:\"dot\",text:\"Dropdown updated!\"}},null,msgParameter];\n        case \"uiAdd\":\n            msgDropdown.payload=currentProperty.uiPointer;\n            // update only dropdown, parametes will follow next call\n            return [{payload:{fill:\"green\",shape:\"dot\",text:\"new entry nr=\"+currentProperty.uiPointer}},msgDropdown,null];\n        case \"uiDelete\":\n            msgDropdown.payload=\"init\"; \n            // update only dropdown, parametes will follow next call\n            return [{payload:{fill:\"green\",shape:\"dot\",text:\"entry deleted\"}},msgDropdown,null];\n        case \"name\":\n            msgDropdown.payload=currentProperty.uiPointer;\n            // update only dropdown\n            return [{payload:{fill:\"green\",shape:\"dot\",text:\"entry renamed!\"}},msgDropdown,null];\n    }\n    if (msg.action && msg.action==\"updateUI\") {\n//        node.warn(msg.item);\n        if (uiControlJson.hasOwnProperty(msg.item)) { // add uiControl if changed value matches criteria\n            return [{payload:{fill:\"green\",shape:\"dot\",text:msg.item+\"=\"+msg.payload}},null,msgParameter];\n        } else {\n            return [{payload:{fill:\"green\",shape:\"dot\",text:msg.item+\"=\"+msg.payload}},null,msg];\n        }\n    } else\n        return [{payload:{fill:\"gray\",shape:\"dot\",text:msg.topic+\"=\"+msg.payload}},null,null];\n/*} catch (err) {\n    return [{payload:{fill:\"red\",shape:\"dot\",text:\"ups, somthing gone wrong. (\"+keyword+\")\"}},null,null];\n} \n*/","outputs":3,"noerr":0,"x":179,"y":85,"wires":[[],[],[]],"outputLabels":["status","updateDropdown","updateElements"]},{"id":"d89ad102.36fa7","type":"function","z":"19ef275d.90c419","name":"fillDropdown","func":"var customTopic=env.get(\"customTopic\");\nif (customTopic) msg.topic= customTopic;\n\n// prepare filter: 1) node.store 2) send by msg 3) set by config\nvar filter= context.get(\"filter\");\nif (msg.hasOwnProperty(\"filterProperty\") && msg.hasOwnProperty(\"filterValue\")) {\n    filter= {\n        \"property\": msg.filterProperty,\n        \"value\": msg.filterValue\n    }\n    //if (filter.property!==\"\") node.warn(\"filter from msg\");\n} else if (env.get(\"filterPropety\") && env.get(\"filterValue\")) {\n    filter= {\n        \"property\": env.get(\"filterProperty\"),\n        \"value\": env.get(\"filterValue\")\n    }\n    //if (filter.property!==\"\") node.warn(\"filter from node Context\");\n} else {\n    filter= {\n        \"property\": \"\",\n        \"value\": \"\"\n    }\n    //node.warn(\"no Filter\");\n}\ncontext.set(\"filter\",filter)\n//if (filter.property!==\"\") node.warn(filter);\n\nvar topicParts=msg.topic.split('.');\nvar currentObject= global.get(topicParts[0],\"file\");\nif (!currentObject) return;\nvar keyword = topicParts.pop();\n//node.warn(msg.topic);\nvar currentProperty=currentObject.getObject(msg.topic);\nif (!currentProperty) {\n    return [{payload:{fill:\"red\",shape:\"dot\",text:\"msg.topic='object.property' expected\"}},null];\n}\n\n//node.warn(currentProperty)\n\n    if (currentProperty.list!==undefined) {\n\n        var sortedList=currentObject.saveSort(currentProperty.list);\n        msg.options=[];\n        sortedList.forEach(function(item){\n            // node.warn(item);\n            if ((filter.property===\"\" && filter.value===\"\") || (item[filter.property]===filter.value)) {\n                if (item.hasOwnProperty(\"name\") &&\n                    item.hasOwnProperty(\"uuid\")) msg.options.push({[item.name]:item.uuid});\n            }\n        })\n        \n        if (msg.payload===\"\") {\n            \n        } else if (currentObject.isUuid(msg.payload)) { // select entry provided by msg.payload (uuid)\n            if (!currentObject.entryExists(currentProperty,msg.payload)) {\n                delete msg.payload; // item not in list\n            } else {\n                currentProperty.uiPointerUuid=msg.payload;  \n            }\n        } else if (typeof msg.payload===\"number\" && msg.payload<currentProperty.list.length) { // by msg payload (index)\n            currentProperty.uiPointerUuid=currentProperty.list[msg.payload].uuid;\n            msg.payload=currentProperty.uiPointerUuid;\n        } else if (!currentProperty.list[currentProperty.uiPointer]) {\n            if (currentProperty.list.length>0){ // or first Entry\n                currentProperty.uiPointer=0; // reset to first\n                currentProperty.uiPointerUuid=currentProperty.list[0].uuid;\n                msg.payload=currentProperty.uiPointerUuid;\n            } else { // item not in List, give up\n                delete msg.payload;\n            }\n        } else { // by uiPointer \n            // send uuid instead index\n            currentProperty.uiPointerUuid=currentProperty.list[currentProperty.uiPointer].uuid;\n            msg.payload=currentProperty.uiPointerUuid;\n        }\n        return [{payload:{fill:\"green\",shape:\"dot\",text:\"done!\"}},msg];\n    } else {\n        return [{payload:{fill:\"yellow\",shape:\"dot\",text:\"object.list empty\"}},null];\n    }\ntry {\n} catch (err) {\n    return [{payload:{fill:\"yellow\",shape:\"dot\",text:\"No list entry\"}},null];\n}","outputs":2,"noerr":0,"x":190,"y":80,"wires":[[],[]],"outputLabels":["status","dropdownUi"]},{"id":"dc890485.dcd878","type":"function","z":"27071f3f.31b85","name":"initializeUi","func":"let globalContext= env.get(\"globalContext\");\nlet baseObject= env.get(\"baseObject\");\nlet uiElement= env.get(\"uiElement\");\n\nmsg.topic= globalContext+'.'+baseObject+'.'+uiElement;\nmsg.filterProperty= env.get(\"filterProperty\");\nmsg.filterValue= env.get(\"filterValue\");\nvar topicParts= \"\";\n\ntry {\n    topicParts=msg.topic.split('.');\n} catch (err) {\n    return [null,{payload: {fill:\"red\",shape:\"dot\",text:\"msg.topic='context.object.property' expected\"}}];\n}\nif (topicParts.length<3) {\n    return [null,{payload: {fill:\"red\",shape:\"dot\",text:\"msg.topic='context.object.property' expected\"}}];\n}\n\n// get or initalize root for global store\nvar currentObject= global.get(globalContext,\"file\");\nif (!currentObject) {\n    return [{payload: {fill:\"red\",shape:\"dot\",text:\"could not find: \"+globalContext}},null];\n}\n\n// get or initialize base Object\ncurrentObject= currentObject.getObject(msg.topic);\nif (!currentObject) {\n    return [{payload: {fill:\"red\",shape:\"dot\",text:\"could not init: \"+msg.topic}},null];\n} else {\n    return [{payload: {fill:\"green\",shape:\"dot\",text:baseObject}},msg];\n}\n","outputs":2,"noerr":0,"x":180,"y":80,"wires":[[],[]],"outputLabels":["status","standard"]},{"id":"66862cd8.ec6f64","type":"function","z":"b8810dd9.449fa","name":"add new","func":"var currentObject= global.get(msg.topic.slice(0,msg.topic.indexOf('.')),\"file\");\nif (!currentObject) return;\nvar defaults=env.get(\"defaults\");\nif (!defaults) {\n    node.error(\"sub[add new] failed, no defaults defined \"+msg.payload+\" to: \"+ msg.topic);\n    return [{payload:{fill:\"red\",shape:\"dot\",text: \"defaults not defined!\"}},null];\n}\n\n// create a new List Entry\nvar currentEntry= currentObject.newEntry(msg.topic,msg.payload);\nif (currentEntry) {\n    currentObject.merge(currentEntry,defaults);\n    msg.payload=currentEntry.uuid;\n\n    return [{payload:{fill:\"green\",shape:\"dot\",text:msg.payload+\" saved\"}},msg];\n} else {\n    node.error(\"sub[add new] failed to add \"+msg.payload+\" to: \"+ msg.topic);\n    return [{payload:{fill:\"red\",shape:\"dot\",text:\"failed to add \"+msg.payload+\" to: \"+ msg.topic}},null];\n}","outputs":2,"noerr":0,"x":200,"y":80,"wires":[[],[]],"outputLabels":["status","standard"],"icon":"font-awesome/fa-plus-square"},{"id":"a48cfce4.487e6","type":"function","z":"5c26875c.b71ff8","name":"buildChart","func":"const ui = {\"enabled\":{\"enabled\": true},\"disabled\":{\"enabled\": false}};\n\nmsg.currentObject= global.get(msg.globalContext,\"file\");\nif (!msg.currentObject) {\n    return [{payload: {fill:\"red\",shape:\"dot\",text: \"could not get \"+msg.globalContext}},ui.disabled]\n}\n\n// --------------- end of UI header ---------------------\n\nvar statusText = \"\"\n\nvar cRoom=msg.roomEntry;\nvar cPeriod=msg.periodEntry;\n\nif (cRoom.chart===undefined)\n    cRoom.chart = [{\n    \"series\":[\"ist\",\"soll\",\"\"],\n    \"data\":[[],[],[]],\n    \"labels\":[\"ist\",\"soll\",\"standard\"]\n    }];\n\nstatusText+= msg.roomEntry.name;\n\nvar timeStamp = 0; //new Date();\nvar temp=0;\nvar time=0;\nvar timeBefore=0;\n\n// timeStamp.setHours(0,0,0);\n\nif (cRoom && \n    cPeriod &&\n    cPeriod.list &&\n    cPeriod.list.length>0) {\n        \n    statusText+= \":\"+cPeriod.name;\n    //sort periods by time\n    if (cPeriod.list!==undefined) {\n        cPeriod.list.sort(function(a,b) {\n            if (a.time > b.time) return 1;\n            if (a.time < b.time) return -1;\n            return 0;\n        });\n    }\n    \n    // write time array for chart\n    cRoom.chart[0].data[1]=[];\n    cPeriod.list.forEach(function (period) {\n        temp=period.temp;\n        cRoom.chart[0].data[1].push(msg.currentObject.adjustTime(-1,{\"x\":(timeBefore*60*1000),\"y\":temp}));\n        time=Number(period.time);\n        cRoom.chart[0].data[1].push(msg.currentObject.adjustTime(-1,{\"x\":(time*60*1000),\"y\":temp}));\n        timeBefore=time;\n    });\n    \n    temp= cPeriod.list[0].temp;\n    cRoom.chart[0].data[1].push(msg.currentObject.adjustTime(-1,{\"x\":(time*60*1000),\"y\":temp,\"note\":\"end\"}));\n    cRoom.chart[0].data[1].push(msg.currentObject.adjustTime(-1,{\"x\":(86400*1000),\"y\":temp,\"note\":\"end\"}));\n  \n    // draw default temp\n    try{\n        cRoom.chart[0].data[2]=[]; // clear old data\n        cRoom.chart[0].data[2].push(msg.currentObject.adjustTime(-1,{\"x\":(0*1000),\"y\":msg.roomsEntry.defaultTemp || 24}));\n        cRoom.chart[0].data[2].push(msg.currentObject.adjustTime(-1,{\"x\":(86400*1000),\"y\":msg.roomsEntry.defaultTemp || 24}));\n    } catch (err) {\n        statusText+=\" no default temp\"\n        return [{payload: {fill:\"red\",shape:\"ring\",text:statusText}},null];\n    }\n    \n} else {\n    statusText+= \" no settings\";\n    cRoom.chart[0].data[1].push(msg.currentObject.adjustTime(-1,{\"x\":(0*1000),\"y\":msg.roomsEntry.defaultTemp || 24}));\n    cRoom.chart[0].data[1].push(msg.currentObject.adjustTime(-1,{\"x\":(86400*1000),\"y\":msg.roomsEntry.defaultTemp || 24}));\n    cRoom.chart[0].data[2].push(msg.currentObject.adjustTime(-1,{\"x\":(0*1000),\"y\":msg.roomsEntry.defaultTemp || 24}));\n    cRoom.chart[0].data[2].push(msg.currentObject.adjustTime(-1,{\"x\":(86400*1000),\"y\":msg.roomsEntry.defaultTemp || 24}));\n    msg.payload = cRoom.chart;\n    return [{payload: {fill:\"yellow\",shape:\"ring\",text:statusText}},msg];\n}\nmsg.payload = cRoom.chart;\nmsg.label= msg.periodEntry.name;\nmsg.ui_control={};\nmsg.ui_control.ymin=msg.roomsEntry.minTemp;\nmsg.ui_control.ymax=msg.roomsEntry.maxTemp;\nreturn [{payload: {fill:\"green\",shape:\"dot\",text:statusText}},msg];","outputs":2,"noerr":0,"x":206,"y":85,"wires":[[],[]],"icon":"node-red-dashboard/ui_chart.png"},{"id":"5c99b054.5823","type":"function","z":"efe64c51.3652e","name":"buildSchedule","func":"const ui = {\"enabled\":{\"enabled\": true},\"disabled\":{\"enabled\": false}};\nconst dow = [\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\",\"Sunday\"];\n\nmsg.currentObject= global.get(msg.globalContext,\"file\");\nif (!msg.currentObject) {\n    return [{payload: {fill:\"red\",shape:\"dot\",text: \"could not get \"+msg.globalContext}},ui.disabled]\n}\n\n// --------------- end of UI header ---------------------\n\nmsg.roomEntry=msg.currentObject.getEntry(msg.globalContext+\".heating.rooms.null\",msg.roomID);\nif (!msg.roomEntry) return [{payload: {fill:\"red\",shape:\"dot\",text: \"no room found!\"}},ui.disabled]\n\nmsg.roomsEntry=msg.currentObject.getEntry(msg.globalContext+\".rooms.null\",msg.roomID);\nif (!msg.roomsEntry) return [{payload: {fill:\"red\",shape:\"dot\",text: \"no rooms found!\"}},ui.disabled]\n\nmsg.periodsObject=msg.currentObject.getObject(msg.globalContext+\".heating.periods.null\");\nif (!msg.periodsObject) return [{payload: {fill:\"red\",shape:\"dot\",text: \"no periods found!\"}},ui.disabled]\n\nvar statusText = msg.roomEntry.name;\n\nvar timeStamp = new Date();\nmsg.payload={};\n\nif (msg.roomEntry.list) {\n        \n    var day =0;\n    \n    var formatMinutes2String = function (minutes) {\n        var hourString=\"00\"+Math.floor(minutes/60);\n        var minuteString=\"00\"+minutes % 60;\n        return hourString.substr(-2)+\":\"+minuteString.substr(-2);\n    }\n    \n    var addSchedule = function (time, temp) {\n        msg.payload[dow[day]][formatMinutes2String(time)]=temp;\n    }\n    \n    var addDay = function (period) {\n            periodDef=msg.currentObject.getEntry(msg.globalContext+\".heating.periods.null\",period.uuid);\n             if (periodDef.days[day].isChecked) {\n                msg.payload[dow[day]][formatMinutes2String(0)]=period.list[0].temp; // start @ 00:00\n                for (var i=0; i<period.list.length-1; i++) {\n                    addSchedule(period.list[i].time,period.list[i+1].temp);\n                }\n                addSchedule(period.list[i].time,period.list[0].temp);\n                msg.payload[dow[day]][formatMinutes2String(1439)]=period.list[0].temp; // end @ 23:59\n            }\n        }\n        \n    for (day=0; day<7; day++) {\n        msg.payload[dow[day]]= {};\n        msg.roomEntry.list.forEach(addDay);\n    }\n  \n} else {\n    statusText+= \" no settings\";\n    return [{payload: {fill:\"yellow\",shape:\"ring\",text:statusText}},msg];\n}\nmsg.topic= \"setCalendar\";\nreturn [{payload: {fill:\"green\",shape:\"dot\",text:statusText}},msg];","outputs":2,"noerr":0,"x":250,"y":119,"wires":[[],[]],"icon":"node-red-dashboard/ui_chart.png"},{"id":"feb4a638.b57db8","type":"function","z":"8fea6c82.8c5f2","name":"table callback","func":"if (!msg.ui_control || !msg.ui_control.callback) return;\n\nvar statusText= \"\";\nvar topicParts= (msg.topic)? msg.topic.split('.') : [\"\"];\n\n// get globalContext out of A) msg.globalContext B) env.globalContext C) msg.topic\nvar globalContext = (msg.globalContext) ? msg.globalContext : env.get(\"globalContext\");\nif (!globalContext || globalContext===\"\") globalContext=topicParts[0];\n\n// get dataContext out of A) msg.dataContext B) env.dataContext C) msg.topic\nvar dataContext = (msg.dataContext) ? msg.dataContext : env.get(\"dataContext\");\nif ((!dataContext || dataContext===\"\") && topicParts.length>1) \n    dataContext=msg.topic.slice(msg.topic.indexOf('.'),msg.topic.lastIndexOf('.'));\n    \n// rebuild msg.topic (could be from differen sources)\nmsg.topic=globalContext+\".\"+dataContext+\".uiTable\";\n\n// aquire data\nvar currentObject= global.get(globalContext,\"file\");\nif (!currentObject) {\n    statusText=globalContext+\" not found\";\n    return [{payload:{fill:\"red\",shape:\"dot\",text: statusText}},null];\n}\nvar currentProperty=currentObject.getObject(msg.topic);\nif (!currentProperty) {\n    statusText=dataContext+\" not found\";\n    return [{payload:{fill:\"red\",shape:\"dot\",text: statusText}},null];\n}\n\n// -------------- store layout updates -----------------\n\nif (!currentProperty.layout) currentProperty.layout={};\nif (!currentProperty.layout.columns) currentProperty.layout.columns={}\nswitch(msg.ui_control.callback) {\n    case 'columnResized':\n        currentProperty.layout.columnWidths[msg.ui_control.columnWidths.field]=msg.ui_control.columnWidths;\n        statusText=\"width stored\"\n        break;\n    case 'columnMoved':\n        currentProperty.layout.columns=msg.ui_control.columns;\n        statusText=\"columns stored\"\n        break;\n}\nreturn [{payload:{fill:\"green\",shape:\"dot\",text: statusText}},null];\n","outputs":2,"noerr":0,"x":199,"y":85,"wires":[[],[]]},{"id":"bc5b194d.a19ee8","type":"function","z":"c46d3622.6147d8","name":"setValue by Group","func":"var statusText= \"\";\n \nvar msgsOut=[];\nvar topicParts= (msg.topic)? msg.topic.split('.') : [\"\"];\n\n// get globalContext out of A) msg.globalContext B) env.globalContext C) msg.topic\nvar globalContext = (msg.globalContext) ? msg.globalContext : env.get(\"globalContext\");\nif (!globalContext || globalContext===\"\") globalContext=topicParts[0];\n\n// get dataContext out of A) msg.dataContext B) env.dataContext C) msg.topic\nvar dataContext = (msg.dataContext) ? msg.dataContext : env.get(\"dataContext\");\nif ((!dataContext || dataContext===\"\") && topicParts.length>1) \n    dataContext=msg.topic.slice(msg.topic.indexOf('.'),msg.topic.lastIndexOf('.'));\n\n// get dataContext out of A) msg.dataContext B) env.dataContext C) msg.topic\nvar groupContext = (msg.groupContext) ? msg.groupContext : env.get(\"groupContext\");\n\n// aquire data\nvar currentObject= global.get(globalContext,\"file\");\nif (!currentObject) {\n    statusText=globalContext+\" not found\";\n    return [{payload:{fill:\"red\",shape:\"dot\",text: statusText}},null];\n}\nvar currentData=currentObject.getObject(globalContext+\".\"+dataContext+\".uiTable\");\nif (!currentData) { statusText=dataContext+\" not found\"; return [{payload:{fill:\"red\",shape:\"dot\",text: statusText}},null];}\n\nvar currentGroup=currentObject.getObject(globalContext+\".\"+groupContext+\".setValue\");\nif (!currentGroup) { statusText=groupContext+\" not found\"; return [{payload:{fill:\"red\",shape:\"dot\",text: statusText}},null];}\n\nvar targetKey=env.get(\"targetKey\");\nvar sourceKey=env.get(\"sourceKey\");\nfor (var dataItem of currentData.list) {\n    if (dataItem[targetKey]==msg.payload[targetKey]) {\n        let msgOut={\n            \"topic\":globalContext+\".\"+dataContext+\".uiTable\",\n            \"room\": msg.payload.room,\n            \"datapointName\": env.get(\"datapointName\"),\n            \"payload\": msg.payload.targetValue,\n            \"groupContext\": globalContext+\".\"+groupContext+\".setValue\",\n            \"deviceName\": dataItem.deviceName,\n            \"roomID\": dataItem.roomId\n        };\n        statusText=msg.room;\n        msgsOut.push(msgOut);\n    }\n}\nreturn [{payload:{fill:\"green\",shape:\"dot\",text: statusText}},msgsOut];","outputs":2,"noerr":0,"x":243,"y":85,"wires":[[],[]]},{"id":"e52d8e95.66917","type":"function","z":"adc11aae.b3d5b8","name":"preUI","func":"var statusText=\"\"\nif (msg.datapoint===env.get(\"datapoint\")) {\n    var msgUI={\"payload\":\"\"};\n    if (typeof msg.payload==\"boolean\") {\n        if (msg.payload) {\n            msgUI.ui_control={\"bgcolor\":\"#eb9534\"};\n            statusText=\"ein\";\n        } else {\n            msgUI.ui_control={\"bgcolor\":\"\"};\n            statusText=\"aus\";\n        }\n    } else {\n        if (msg.payload>0) {\n            msgUI.label=msg.payload+\"min\";\n            msgUI.ui_control={\"bgcolor\":\"#eb9534\"};\n        } else {\n            msgUI.label=\"aus\";\n            msgUI.ui_control={\"bgcolor\":\"\"};\n        }\n        statusText=msgUI.label;\n    }\n    return [{payload:{fill:\"green\",shape:\"dot\",text: statusText}},msgUI];\n}","outputs":2,"noerr":0,"x":186,"y":85,"wires":[[],[]]},{"id":"f9bc6dd2.da22a","type":"function","z":"f26e05b.4babbf8","name":"filter Room","func":"if (msg.room==env.get(\"room\")) {\n    return [{payload:{fill:\"green\",shape:\"dot\",text: msg.room}},msg];\n} else {\n    return [{payload:{fill:\"yellow\",shape:\"dot\",text: msg.room}},null];\n}","outputs":2,"noerr":0,"x":206,"y":85,"wires":[[],[]]},{"id":"eadd64de.393498","type":"function","z":"8b95e4a9.1e0f18","name":"Group","func":"var groupTopic= env.get(\"groupTopic\");\nvar groupMembers=env.get(\"groupMembers\");\nvar sceneTopic=env.get(\"sceneTopic\");\nvar sceneMembers=env.get(\"sceneMembers\");\n\nif (!msg.topic) msg.topic=env.get(\"topic\");\nvar topicParts=msg.topic.split('.');\nvar myStore = topicParts[0];\n// get Base from global store\nvar baseObject= global.get(myStore,\"file\");\nvar devices= baseObject.getObject(myStore+\".\"+env.get(\"devices\")+\".uiList\");\nvar device= {};\nvar msgOut=[];\n\nswitch (topicParts[topicParts.length-2]) {\n    case sceneTopic : // control scene \n        if (msg.property.hasOwnProperty(sceneMembers)) {\n            msg.property[sceneMembers].list.forEach(function (light) {\n                if (light.isChecked) {\n                   device=baseObject.getEntry(devices,light.lightUuid)\n                   msgOut.push({\n                       \"topic\": msg.topic,\n                       \"property\": {\n                           \"name\": light.name,\n                           \"system\": device.system,\n                           \"type\": device.type,\n                           \"defaultSwitch\": (topicParts[topicParts.length-1]===\"switch\") ? msg.payload : light.switch,\n                           \"defaultDimmer\": (topicParts[topicParts.length-1]===\"dimmer\") ? light.dimmer*(msg.payload/100) : light.dimmer,\n                           \"defaultColor\": (topicParts[topicParts.length-1]===\"tint\") ? light.color : msg.property.defaultColor\n                       }\n                   });\n               }\n            });\n            return [{payload:{fill:\"green\",shape:\"dot\",text:\"scene: \"+msg.property.name}},msgOut];\n        }\n        break;\n    case sceneMembers : // control scene members\n        if (msg.property.hasOwnProperty(sceneMembers)) {\n            msg.property[sceneMembers].list.forEach(function (light) {\n                if (light.isChecked) {\n                   device=baseObject.getEntry(devices,light.lightUuid)\n                   msgOut.push({\n                       \"topic\": msg.topic,\n                       \"property\": {\n                           \"name\": light.name,\n                           \"system\": device.system,\n                           \"type\": device.type,\n                           \"defaultSwitch\": (topicParts[topicParts.length-1]===\"defaultSwitch\") ? msg.payload : light.switch,\n                           \"defaultDimmer\": (topicParts[topicParts.length-1]===\"defaultDimmer\") ? light.dimmer*(msg.payload/100) : light.dimmer,\n                           \"defaultColor\": light.color\n                       }\n                   });\n               }\n            });\n            return [{payload:{fill:\"green\",shape:\"dot\",text:\"scene: \"+msg.property.name}},msgOut];\n        }\n        break;\n    case groupTopic : // control group members;\n        if (msg.property.hasOwnProperty(groupMembers)) {\n            msg.property[groupMembers].list.forEach(function (light) {\n               if (light.isChecked) {\n                   device=baseObject.getEntry(devices,light.uuid)\n                   if (device===undefined) { // device does not exist any more so delete link\n                        var erasedEntry = baseObject.deleteEntry(msg.property[groupMembers],light.uuid);\n                        if (erasedEntry) node.warn(\"sub[groupSend] success: \"+erasedEntry.name+\" deleted\")\n                        else node.error(\"sub[groupSend] failed to delete non existing device: \"+light.name+\" \"+light.uuid);\n                   } else {\n                       msgOut.push({\n                           \"topic\": msg.topic,\n                           \"property\": {\n                               \"name\": light.name,\n                               \"uuid\": light.uuid,\n                               \"system\": device.system,\n                               \"type\": device.type,\n                               \"defaultSwitch\": msg.property.defaultSwitch,\n                               \"defaultDimmer\": msg.property.defaultDimmer,\n                               \"defaultColor\": msg.property.defaultColor\n                           }\n                       });\n                   }\n               }\n            });\n            return [{payload:{fill:\"green\",shape:\"dot\",text:\"group: \"+msg.property.name}},msgOut];\n        }\n        break;\n    default :\n        return [{payload:{fill:\"yellow\",shape:\"dot\",text:\"single device\"}},msg];\n        break;\n}\n","outputs":2,"noerr":0,"x":203,"y":85,"wires":[[],[]]},{"id":"ae6dbb77.7f31d8","type":"function","z":"e9e5bb1.fdbb548","name":"save List","func":"var status={};\nvar baseObject= global.get(msg.topic.slice(0,msg.topic.indexOf('.')),\"file\");\nvar propertyName=msg.topic.slice(msg.topic.lastIndexOf('.')+1);\nif (!baseObject) return;\nvar currentObject= baseObject.getCurrentEntry(msg.topic);\nvar currentGroup= baseObject.getSubObject(currentObject,propertyName);\n    if (!msg.payload.isChecked) { // delete entry from list if unchecked\n        baseObject.deleteEntry(currentGroup,msg.payload.uuid)\n        status= {fill:\"green\",shape:\"dot\",text:currentObject.name+\": \"+msg.payload.title+\" removed\"};\n    } else {\n        var currentEntry= baseObject.getEntry(currentGroup,msg.payload.uuid);\n        baseObject.merge(currentEntry,env.get(\"defaults\"));\n\n        currentEntry.isChecked=msg.payload.isChecked;\n        currentEntry.type=msg.payload.type;\n        currentEntry.name=msg.payload.title;\n        status= {fill:\"green\",shape:\"dot\",text:currentObject.name+\": \"+msg.payload.title+\"=\"+msg.payload.isChecked};\n    }\n    var msgDropdown={\"options\":[]};\n    for (var device of currentGroup.list) {\n        if (device.isChecked) msgDropdown.options.push({[device.name]: device.uuid});\n    }\n    return [{\"payload\":status},msg,msgDropdown];\ntry {\n} catch (err) {\n    return [{\"payload\":{fill:\"red\",shape:\"dot\",text:\"ups, somthing gone wrong.\"}},null,null];\n} ","outputs":3,"noerr":0,"x":196,"y":85,"wires":[[],[],[]]},{"id":"88a2a41c.d5c5c8","type":"mqtt in","z":"2b7f3aff.416326","name":"uMQTT","topic":"SensorData/#","qos":"0","datatype":"auto","broker":"1245c071.4e1e","x":70,"y":40,"wires":[["4644d215.a78cec"]]},{"id":"3ef42bb4.636ba4","type":"mqtt out","z":"2b7f3aff.416326","name":"command/","topic":"","qos":"","retain":"","broker":"1245c071.4e1e","x":530,"y":480,"wires":[]},{"id":"8e1521d1.24f93","type":"inject","z":"2b7f3aff.416326","name":"","topic":"command/","payload":"36/06/16/26/36/46","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":280,"y":440,"wires":[["3ef42bb4.636ba4"]]},{"id":"5d8336c8.317be8","type":"inject","z":"2b7f3aff.416326","name":"","topic":"command/","payload":"36/06/36/26/46/16","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":280,"y":520,"wires":[["3ef42bb4.636ba4"]]},{"id":"b83366cb.622b28","type":"inject","z":"2b7f3aff.416326","name":"","topic":"command/","payload":"36/06/46/36/26/16","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":280,"y":480,"wires":[["3ef42bb4.636ba4"]]},{"id":"4644d215.a78cec","type":"switch","z":"2b7f3aff.416326","name":"Sort by Rooms","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Livingroom","vt":"str"},{"t":"cont","v":"Kitchen","vt":"str"},{"t":"cont","v":"Bedroom1","vt":"str"},{"t":"cont","v":"Bedroom2","vt":"str"},{"t":"cont","v":"Bedroom3","vt":"str"},{"t":"cont","v":"Bedroom4","vt":"str"},{"t":"cont","v":"Bathroom1","vt":"str"},{"t":"cont","v":"Bathroom2","vt":"str"},{"t":"cont","v":"Bathroom3","vt":"str"},{"t":"cont","v":"Bathroom4","vt":"str"},{"t":"cont","v":"Laundry","vt":"str"},{"t":"cont","v":"Boilerroom","vt":"str"},{"t":"cont","v":"Workshop","vt":"str"},{"t":"cont","v":"Office","vt":"str"},{"t":"cont","v":"Garage","vt":"str"},{"t":"cont","v":"Water Tank","vt":"str"},{"t":"cont","v":"Solar Tracker","vt":"str"}],"checkall":"true","repair":true,"outputs":17,"x":100,"y":200,"wires":[["83c4f481.f30fd8"],["c43652a2.7c4b7"],["16a1b7ad.589818"],["43eeaa67.81f804"],["d612775e.c6fff8"],["cc6448c3.761988"],["78e9eabc.fa9134"],["12396a4f.3295f6"],["56f0bbff.2c8534"],["78ee9563.8e168c"],["985d7fc1.6ea88"],["2ff7b3c7.64b2cc"],["e62be274.9001"],["96c3b215.47546"],["2b035903.e5c096"],["535f201f.e9af4"],["f6afd5cd.d281b8"]]},{"id":"43eeaa67.81f804","type":"change","z":"2b7f3aff.416326","name":"Bedroom2","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":200,"wires":[["78d05076.ea6f3"]]},{"id":"78d05076.ea6f3","type":"link out","z":"2b7f3aff.416326","name":"Bedroom2","links":[],"x":635,"y":200,"wires":[]},{"id":"83c4f481.f30fd8","type":"change","z":"2b7f3aff.416326","name":"Livingroom","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":80,"wires":[["16d2ac4a.c20a54"]]},{"id":"16d2ac4a.c20a54","type":"link out","z":"2b7f3aff.416326","name":"Livingroom","links":[],"x":635,"y":80,"wires":[]},{"id":"c43652a2.7c4b7","type":"change","z":"2b7f3aff.416326","name":"Kitchen","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":120,"wires":[["4a019ad.847be64"]]},{"id":"4a019ad.847be64","type":"link out","z":"2b7f3aff.416326","name":"Kitchen","links":[],"x":635,"y":120,"wires":[]},{"id":"16a1b7ad.589818","type":"change","z":"2b7f3aff.416326","name":"Bedroom1","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":160,"wires":[["2fd6c27c.7ef42e"]]},{"id":"2fd6c27c.7ef42e","type":"link out","z":"2b7f3aff.416326","name":"Bedroom1","links":[],"x":635,"y":160,"wires":[]},{"id":"12396a4f.3295f6","type":"change","z":"2b7f3aff.416326","name":"Bathroom2","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":200,"wires":[["6b65a89a.4720e8"]]},{"id":"6b65a89a.4720e8","type":"link out","z":"2b7f3aff.416326","name":"Bathroom2","links":[],"x":715,"y":200,"wires":[]},{"id":"d612775e.c6fff8","type":"change","z":"2b7f3aff.416326","name":"Bedroom3","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":80,"wires":[["7bd7578d.c5d628"]]},{"id":"7bd7578d.c5d628","type":"link out","z":"2b7f3aff.416326","name":"Bedroom3","links":[],"x":715,"y":80,"wires":[]},{"id":"cc6448c3.761988","type":"change","z":"2b7f3aff.416326","name":"Bedroom4","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":120,"wires":[["eab40cba.23dc2"]]},{"id":"eab40cba.23dc2","type":"link out","z":"2b7f3aff.416326","name":"Bedroom4","links":[],"x":715,"y":120,"wires":[]},{"id":"78e9eabc.fa9134","type":"change","z":"2b7f3aff.416326","name":"Bathroom1","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":160,"wires":[["b4546a4c.5f3688"]]},{"id":"b4546a4c.5f3688","type":"link out","z":"2b7f3aff.416326","name":"Bathroom1","links":[],"x":715,"y":160,"wires":[]},{"id":"2ff7b3c7.64b2cc","type":"change","z":"2b7f3aff.416326","name":"Boilerroom","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":360,"wires":[["8646e63c.449de8"]]},{"id":"8646e63c.449de8","type":"link out","z":"2b7f3aff.416326","name":"Boilerroom","links":[],"x":635,"y":360,"wires":[]},{"id":"56f0bbff.2c8534","type":"change","z":"2b7f3aff.416326","name":"Bathroom3","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":240,"wires":[["9f9dc89e.b85c58"]]},{"id":"9f9dc89e.b85c58","type":"link out","z":"2b7f3aff.416326","name":"Bathroom3","links":[],"x":635,"y":240,"wires":[]},{"id":"78ee9563.8e168c","type":"change","z":"2b7f3aff.416326","name":"Bathroom4","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":280,"wires":[["3055cf.86c6ca32"]]},{"id":"3055cf.86c6ca32","type":"link out","z":"2b7f3aff.416326","name":"Bathroom4","links":[],"x":635,"y":280,"wires":[]},{"id":"985d7fc1.6ea88","type":"change","z":"2b7f3aff.416326","name":"Laundry","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":320,"wires":[["c49cf6ba.1e8448"]]},{"id":"c49cf6ba.1e8448","type":"link out","z":"2b7f3aff.416326","name":"Laundry","links":[],"x":635,"y":320,"wires":[]},{"id":"535f201f.e9af4","type":"change","z":"2b7f3aff.416326","name":"Water Tank","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":360,"wires":[["8f4fba31.88ff08"]]},{"id":"8f4fba31.88ff08","type":"link out","z":"2b7f3aff.416326","name":"Water Tank","links":[],"x":715,"y":360,"wires":[]},{"id":"e62be274.9001","type":"change","z":"2b7f3aff.416326","name":"Workshop","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":240,"wires":[["7a871228.4c76bc"]]},{"id":"7a871228.4c76bc","type":"link out","z":"2b7f3aff.416326","name":"Workshop","links":[],"x":715,"y":240,"wires":[]},{"id":"96c3b215.47546","type":"change","z":"2b7f3aff.416326","name":"Office","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":280,"wires":[["3c48dfa0.dbca4"]]},{"id":"3c48dfa0.dbca4","type":"link out","z":"2b7f3aff.416326","name":"Office","links":[],"x":715,"y":280,"wires":[]},{"id":"2b035903.e5c096","type":"change","z":"2b7f3aff.416326","name":"Garage","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":320,"wires":[["b46c0d46.9a948"]]},{"id":"b46c0d46.9a948","type":"link out","z":"2b7f3aff.416326","name":"Garage","links":[],"x":715,"y":320,"wires":[]},{"id":"f6afd5cd.d281b8","type":"change","z":"2b7f3aff.416326","name":"Solar Tracker","rules":[{"t":"change","p":"topic","pt":"msg","from":"/6","fromt":"env","to":"/Voltage","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"16","fromt":"env","to":"Temperature","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"26","fromt":"env","to":"Humidity","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"36","fromt":"env","to":"Pressure","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"46","fromt":"env","to":"Light","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"56","fromt":"env","to":"OpenClose","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"66","fromt":"env","to":"Level","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"76","fromt":"env","to":"Presence","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"86","fromt":"env","to":"Motion","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":400,"wires":[["3cdb82fa.76adee"]]},{"id":"3cdb82fa.76adee","type":"link out","z":"2b7f3aff.416326","name":"Solar Tracker","links":[],"x":715,"y":400,"wires":[]},{"id":"9b94dcd4.7171e","type":"switch","z":"2b7f3aff.416326","name":"Livingroom","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":620,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"42d6897b.648718","type":"link in","z":"2b7f3aff.416326","name":"Livingroom","links":[],"x":35,"y":620,"wires":[["9b94dcd4.7171e"]]},{"id":"f95b4240.399b7","type":"debug","z":"2b7f3aff.416326","name":"SensorData","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","targetType":"msg","x":460,"y":960,"wires":[]},{"id":"793a1b85.f5e064","type":"switch","z":"2b7f3aff.416326","name":"Kitchen","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":140,"y":760,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"b2209664.d0fe78","type":"link in","z":"2b7f3aff.416326","name":"Kitchen","links":[],"x":35,"y":760,"wires":[["793a1b85.f5e064"]]},{"id":"eb672841.1018d8","type":"link in","z":"2b7f3aff.416326","name":"Bedroom1","links":[],"x":35,"y":900,"wires":[["e906d760.9984d8"]]},{"id":"e906d760.9984d8","type":"switch","z":"2b7f3aff.416326","name":"Bedroom1","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":900,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"d77febaa.64ab18","type":"switch","z":"2b7f3aff.416326","name":"Bedroom2","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":1040,"wires":[["f95b4240.399b7"],[],[],[],[],[],[],[],[]]},{"id":"35bd7e18.52fe22","type":"link in","z":"2b7f3aff.416326","name":"Bedroom2","links":[],"x":35,"y":1040,"wires":[["d77febaa.64ab18"]]},{"id":"741bb72e.3e8c38","type":"link in","z":"2b7f3aff.416326","name":"Bedroom3","links":[],"x":35,"y":1180,"wires":[["54692c2c.4b2284"]]},{"id":"54692c2c.4b2284","type":"switch","z":"2b7f3aff.416326","name":"Bedroom3","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":1180,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"284a3211.49283e","type":"link in","z":"2b7f3aff.416326","name":"Bedroom4","links":[],"x":35,"y":1320,"wires":[["3274929d.7cf0de"]]},{"id":"3274929d.7cf0de","type":"switch","z":"2b7f3aff.416326","name":"Bedroom4","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":1320,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"dda1538f.625ad","type":"link in","z":"2b7f3aff.416326","name":"Bathroom1","links":[],"x":35,"y":1460,"wires":[["2236639c.a5743c"]]},{"id":"2236639c.a5743c","type":"switch","z":"2b7f3aff.416326","name":"Bathroom1","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":1460,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"75619d16.7843e4","type":"link in","z":"2b7f3aff.416326","name":"Bathroom2","links":[],"x":35,"y":1600,"wires":[["c2b62f2c.013df"]]},{"id":"c2b62f2c.013df","type":"switch","z":"2b7f3aff.416326","name":"Bathroom2","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":1600,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"71873d8d.302194","type":"link in","z":"2b7f3aff.416326","name":"Bathroom3","links":[],"x":35,"y":1740,"wires":[["b3aeca01.8b5378"]]},{"id":"b3aeca01.8b5378","type":"switch","z":"2b7f3aff.416326","name":"Bathroom3","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":1740,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"2a8af7d2.1c37c8","type":"link in","z":"2b7f3aff.416326","name":"Bathroom4","links":[],"x":35,"y":1900,"wires":[["7f0a1dcc.ddcee4"]]},{"id":"7f0a1dcc.ddcee4","type":"switch","z":"2b7f3aff.416326","name":"Bathroom4","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":1900,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"4f253e35.fcd8a","type":"link in","z":"2b7f3aff.416326","name":"Laundry","links":[],"x":35,"y":2060,"wires":[["bc0ef118.8786d"]]},{"id":"bc0ef118.8786d","type":"switch","z":"2b7f3aff.416326","name":"Laundry","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":140,"y":2060,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"5a2db952.b1f1c8","type":"link in","z":"2b7f3aff.416326","name":"Boilerroom","links":[],"x":35,"y":2220,"wires":[["eee95a11.a5d958"]]},{"id":"eee95a11.a5d958","type":"switch","z":"2b7f3aff.416326","name":"Boilerroom","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":2220,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"9baaba5f.405bc8","type":"link in","z":"2b7f3aff.416326","name":"Workshop","links":[],"x":35,"y":2380,"wires":[["b15f9d88.872ee"]]},{"id":"b15f9d88.872ee","type":"switch","z":"2b7f3aff.416326","name":"Workshop","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":140,"y":2380,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"b54ca53f.bde2c8","type":"link in","z":"2b7f3aff.416326","name":"Office","links":[],"x":35,"y":2540,"wires":[["11099a2b.2437d6"]]},{"id":"11099a2b.2437d6","type":"switch","z":"2b7f3aff.416326","name":"Office","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":130,"y":2540,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"6a19a59d.4f77ac","type":"link in","z":"2b7f3aff.416326","name":"Garage","links":[],"x":35,"y":2700,"wires":[["baf6d784.12b468"]]},{"id":"baf6d784.12b468","type":"switch","z":"2b7f3aff.416326","name":"Garage","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":140,"y":2700,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"c7028c30.142a4","type":"link in","z":"2b7f3aff.416326","name":"Water Tank","links":[],"x":35,"y":2860,"wires":[["1745aed6.4c51b1"]]},{"id":"1745aed6.4c51b1","type":"switch","z":"2b7f3aff.416326","name":"Water Tank","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":2860,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"276c95ef.3051ca","type":"link in","z":"2b7f3aff.416326","name":"Solar Tracker","links":[],"x":35,"y":3020,"wires":[["722eec84.9d7054"]]},{"id":"722eec84.9d7054","type":"switch","z":"2b7f3aff.416326","name":"Solar Tracker","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":3020,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"c2141da4.9adda","type":"mqtt in","z":"a113cbb3.d689a8","name":"uMQTT","topic":"#","qos":"0","datatype":"auto","broker":"295c2c31.882894","x":90,"y":40,"wires":[["f578acae.33c79"]]},{"id":"614b6b35.114984","type":"mqtt out","z":"a113cbb3.d689a8","name":"command/","topic":"","qos":"","retain":"","broker":"295c2c31.882894","x":530,"y":480,"wires":[]},{"id":"3114f125.66970e","type":"inject","z":"a113cbb3.d689a8","name":"","topic":"command/","payload":"36/06/16/26/36/46","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":280,"y":440,"wires":[["614b6b35.114984"]]},{"id":"8c1bcb2.335b438","type":"inject","z":"a113cbb3.d689a8","name":"","topic":"command/","payload":"36/06/36/26/46/16","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":280,"y":520,"wires":[["614b6b35.114984"]]},{"id":"aaade127.46b2d","type":"inject","z":"a113cbb3.d689a8","name":"","topic":"command/","payload":"36/06/46/36/26/16","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":280,"y":480,"wires":[["614b6b35.114984"]]},{"id":"f578acae.33c79","type":"switch","z":"a113cbb3.d689a8","name":"Sort by Rooms","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"Livingroom","vt":"str"},{"t":"cont","v":"Kitchen","vt":"str"},{"t":"cont","v":"Bedroom1","vt":"str"},{"t":"cont","v":"Bedroom2","vt":"str"},{"t":"cont","v":"Bedroom3","vt":"str"},{"t":"cont","v":"Bedroom4","vt":"str"},{"t":"cont","v":"Bathroom1","vt":"str"},{"t":"cont","v":"Bathroom2","vt":"str"},{"t":"cont","v":"Bathroom3","vt":"str"},{"t":"cont","v":"Bathroom4","vt":"str"},{"t":"cont","v":"Laundry","vt":"str"},{"t":"cont","v":"Boilerroom","vt":"str"},{"t":"cont","v":"Workshop","vt":"str"},{"t":"cont","v":"Office","vt":"str"},{"t":"cont","v":"Garage","vt":"str"},{"t":"cont","v":"Water Tank","vt":"str"},{"t":"cont","v":"Solar Tracker","vt":"str"}],"checkall":"true","repair":true,"outputs":17,"x":100,"y":200,"wires":[["c503d81a.ca0638"],["2afebbc8.2794f4"],["132805fa.96fb9a"],["630d707a.4d16d"],["e02515aa.9464b8"],["58e09b3e.8c6694"],["ab175e27.fa022"],["26374e40.9da282"],["498a4aa6.da1c74"],["a7015cbe.683fb"],["e048641d.a5c268"],["b18cca85.455fc8"],["e0e3a912.eb2538"],["99bf7fe1.888"],["1daa80ca.cf2adf"],["89cdfd9d.7fff4"],["c969111.f9c1cf"]]},{"id":"630d707a.4d16d","type":"link out","z":"a113cbb3.d689a8","name":"Bedroom2","links":["b04cd268.b93ce"],"x":395,"y":80,"wires":[]},{"id":"c503d81a.ca0638","type":"link out","z":"a113cbb3.d689a8","name":"Livingroom","links":[],"x":315,"y":20,"wires":[]},{"id":"2afebbc8.2794f4","type":"link out","z":"a113cbb3.d689a8","name":"Kitchen","links":[],"x":395,"y":40,"wires":[]},{"id":"132805fa.96fb9a","type":"link out","z":"a113cbb3.d689a8","name":"Bedroom1","links":[],"x":315,"y":60,"wires":[]},{"id":"26374e40.9da282","type":"link out","z":"a113cbb3.d689a8","name":"Bathroom2","links":[],"x":395,"y":160,"wires":[]},{"id":"e02515aa.9464b8","type":"link out","z":"a113cbb3.d689a8","name":"Bedroom3","links":[],"x":315,"y":100,"wires":[]},{"id":"58e09b3e.8c6694","type":"link out","z":"a113cbb3.d689a8","name":"Bedroom4","links":[],"x":395,"y":120,"wires":[]},{"id":"ab175e27.fa022","type":"link out","z":"a113cbb3.d689a8","name":"Bathroom1","links":[],"x":315,"y":140,"wires":[]},{"id":"b18cca85.455fc8","type":"link out","z":"a113cbb3.d689a8","name":"Boilerroom","links":[],"x":395,"y":240,"wires":[]},{"id":"498a4aa6.da1c74","type":"link out","z":"a113cbb3.d689a8","name":"Bathroom3","links":[],"x":315,"y":180,"wires":[]},{"id":"a7015cbe.683fb","type":"link out","z":"a113cbb3.d689a8","name":"Bathroom4","links":[],"x":395,"y":200,"wires":[]},{"id":"e048641d.a5c268","type":"link out","z":"a113cbb3.d689a8","name":"Laundry","links":[],"x":315,"y":220,"wires":[]},{"id":"89cdfd9d.7fff4","type":"link out","z":"a113cbb3.d689a8","name":"Water Tank","links":[],"x":395,"y":320,"wires":[]},{"id":"e0e3a912.eb2538","type":"link out","z":"a113cbb3.d689a8","name":"Workshop","links":[],"x":315,"y":260,"wires":[]},{"id":"99bf7fe1.888","type":"link out","z":"a113cbb3.d689a8","name":"Office","links":[],"x":395,"y":280,"wires":[]},{"id":"1daa80ca.cf2adf","type":"link out","z":"a113cbb3.d689a8","name":"Garage","links":[],"x":315,"y":300,"wires":[]},{"id":"c969111.f9c1cf","type":"link out","z":"a113cbb3.d689a8","name":"Solar Tracker","links":[],"x":315,"y":340,"wires":[]},{"id":"598e9c92.0b7d04","type":"switch","z":"a113cbb3.d689a8","name":"Livingroom","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":640,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"a305dbec.98f408","type":"link in","z":"a113cbb3.d689a8","name":"Livingroom","links":[],"x":35,"y":640,"wires":[["598e9c92.0b7d04"]]},{"id":"dd5f7c4f.cb2d3","type":"debug","z":"a113cbb3.d689a8","name":"SensorData","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","targetType":"msg","x":520,"y":1020,"wires":[]},{"id":"83bbe3fc.3f3aa","type":"switch","z":"a113cbb3.d689a8","name":"Kitchen","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":140,"y":780,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"4758c834.3198d8","type":"link in","z":"a113cbb3.d689a8","name":"Kitchen","links":[],"x":35,"y":780,"wires":[["83bbe3fc.3f3aa"]]},{"id":"415bb90c.308588","type":"link in","z":"a113cbb3.d689a8","name":"Bedroom1","links":[],"x":35,"y":920,"wires":[["8594c707.a9d588"]]},{"id":"8594c707.a9d588","type":"switch","z":"a113cbb3.d689a8","name":"Bedroom1","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":920,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"1ec938b.4532ec7","type":"switch","z":"a113cbb3.d689a8","name":"Bedroom2","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"Volts","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":1060,"wires":[["9ff39b52.2fb2d8"],[],[],[],[],[],[],[],[]]},{"id":"b04cd268.b93ce","type":"link in","z":"a113cbb3.d689a8","name":"Bedroom2","links":["630d707a.4d16d"],"x":35,"y":1060,"wires":[["1ec938b.4532ec7"]]},{"id":"52da0fc7.a153a","type":"link in","z":"a113cbb3.d689a8","name":"Bedroom3","links":[],"x":35,"y":1200,"wires":[["4936c357.f7a87c"]]},{"id":"4936c357.f7a87c","type":"switch","z":"a113cbb3.d689a8","name":"Bedroom3","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":1200,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"98177d08.5f616","type":"link in","z":"a113cbb3.d689a8","name":"Bedroom4","links":[],"x":35,"y":1340,"wires":[["537ad305.6290ec"]]},{"id":"537ad305.6290ec","type":"switch","z":"a113cbb3.d689a8","name":"Bedroom4","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":1340,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"cc998010.1bfdd","type":"link in","z":"a113cbb3.d689a8","name":"Bathroom1","links":[],"x":35,"y":1480,"wires":[["e30b10f9.ed0d5"]]},{"id":"e30b10f9.ed0d5","type":"switch","z":"a113cbb3.d689a8","name":"Bathroom1","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":1480,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"9bb06368.aa187","type":"link in","z":"a113cbb3.d689a8","name":"Bathroom2","links":[],"x":35,"y":1620,"wires":[["cf7ad16f.b3c23"]]},{"id":"cf7ad16f.b3c23","type":"switch","z":"a113cbb3.d689a8","name":"Bathroom2","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":1620,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"35452cc3.ea23f4","type":"link in","z":"a113cbb3.d689a8","name":"Bathroom3","links":[],"x":35,"y":1780,"wires":[["a32be0b2.85943"]]},{"id":"a32be0b2.85943","type":"switch","z":"a113cbb3.d689a8","name":"Bathroom3","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":1780,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"b2f8f449.79ed48","type":"link in","z":"a113cbb3.d689a8","name":"Bathroom4","links":[],"x":35,"y":1940,"wires":[["19009e12.8e03b2"]]},{"id":"19009e12.8e03b2","type":"switch","z":"a113cbb3.d689a8","name":"Bathroom4","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":1940,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"450a75de.9f8a7c","type":"link in","z":"a113cbb3.d689a8","name":"Laundry","links":[],"x":35,"y":2100,"wires":[["c9c8b52b.bb1928"]]},{"id":"c9c8b52b.bb1928","type":"switch","z":"a113cbb3.d689a8","name":"Laundry","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":140,"y":2100,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"6098c3d9.53f22c","type":"link in","z":"a113cbb3.d689a8","name":"Boilerroom","links":[],"x":35,"y":2260,"wires":[["12b6df78.bb4381"]]},{"id":"12b6df78.bb4381","type":"switch","z":"a113cbb3.d689a8","name":"Boilerroom","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":2260,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"e765692a.af33b8","type":"link in","z":"a113cbb3.d689a8","name":"Workshop","links":[],"x":35,"y":2400,"wires":[["5c0a7354.57753c"]]},{"id":"5c0a7354.57753c","type":"switch","z":"a113cbb3.d689a8","name":"Workshop","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":140,"y":2400,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"f6470c9a.5a4f7","type":"link in","z":"a113cbb3.d689a8","name":"Office","links":[],"x":35,"y":2560,"wires":[["18f24b66.65d115"]]},{"id":"18f24b66.65d115","type":"switch","z":"a113cbb3.d689a8","name":"Office","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":130,"y":2560,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"253bbda.cac3342","type":"link in","z":"a113cbb3.d689a8","name":"Garage","links":[],"x":35,"y":2720,"wires":[["ac875b6c.a0c5a8"]]},{"id":"ac875b6c.a0c5a8","type":"switch","z":"a113cbb3.d689a8","name":"Garage","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":140,"y":2720,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"804a0c5d.bd2d4","type":"link in","z":"a113cbb3.d689a8","name":"Water Tank","links":[],"x":35,"y":2880,"wires":[["3e160026.786ca"]]},{"id":"3e160026.786ca","type":"switch","z":"a113cbb3.d689a8","name":"Water Tank","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":2880,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"49b63ff0.8b232","type":"link in","z":"a113cbb3.d689a8","name":"Solar Tracker","links":[],"x":35,"y":3040,"wires":[["7ea26c12.862dc4"]]},{"id":"7ea26c12.862dc4","type":"switch","z":"a113cbb3.d689a8","name":"Solar Tracker","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"Voltage","vt":"str"},{"t":"cont","v":"Temperature","vt":"str"},{"t":"cont","v":"Humidity","vt":"str"},{"t":"cont","v":"Pressure","vt":"str"},{"t":"cont","v":"Light","vt":"str"},{"t":"cont","v":"OpenClose","vt":"str"},{"t":"cont","v":"Level","vt":"str"},{"t":"cont","v":"Presence","vt":"str"},{"t":"cont","v":"Motion","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":150,"y":3040,"wires":[[],[],[],[],[],[],[],[],[]]},{"id":"9ff39b52.2fb2d8","type":"json","z":"a113cbb3.d689a8","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1020,"wires":[["dd5f7c4f.cb2d3"]]},{"id":"bd74bcb8.8d022","type":"file","z":"a113cbb3.d689a8","name":"","filename":"SensorData","appendNewline":true,"createDir":true,"overwriteFile":"false","encoding":"none","x":690,"y":20,"wires":[[]]},{"id":"25436810.6379a8","type":"file in","z":"a113cbb3.d689a8","name":"","filename":"SensorData","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":430,"y":380,"wires":[["1e92f90e.2c3057"]]},{"id":"1e92f90e.2c3057","type":"debug","z":"a113cbb3.d689a8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":610,"y":380,"wires":[]},{"id":"f8ac5787.030a78","type":"inject","z":"a113cbb3.d689a8","name":"","topic":"","payload":"","payloadType":"date","repeat":"60","crontab":"","once":true,"onceDelay":0.1,"x":250,"y":380,"wires":[[]]},{"id":"741a4724.d51ac8","type":"mqtt in","z":"a113cbb3.d689a8","name":"","topic":"#","qos":"0","datatype":"auto","broker":"39664163.1a5f4e","x":70,"y":360,"wires":[[]]},{"id":"eda226c2.3b3e18","type":"join","z":"a113cbb3.d689a8","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"payload","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"60","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":650,"y":60,"wires":[["bd74bcb8.8d022"]]}]
